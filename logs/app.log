2025-06-25 22:11:42,144 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:11:42,149 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:11:42,149 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:11:42,890 - INFO - app.main - Application startup event triggered.
2025-06-25 22:11:42,942 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:11:42,943 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:11:42,967 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:11:42,978 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:11:42,978 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:11:42,978 - INFO - app.main - Redis publisher background task started
2025-06-25 22:11:42,978 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:11:42,978 - INFO - app.main - Generating initial service account token...
2025-06-25 22:11:42,978 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:11:43,928 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:11:43,932 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:11:43,932 - INFO - app.main - Application startup event finished.
2025-06-25 22:11:43,932 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:11:43,933 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:11:44,560 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:12:42,983 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:12:43,013 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:12:43,073 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:12:43,090 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:12:43,669 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3111393097957254111617029, Commission=0.10000000, Final PnL=-445.4111393097957254111617029
2025-06-25 22:12:43,697 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:12:43,704 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:12:43,746 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:12:44,438 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:12:44,439 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229802692145007588763653554, Commission=0.10000000, Final PnL=-0.5229802692145007588763653554
2025-06-25 22:12:44,442 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:12:44,445 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:13:42,976 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:13:42,982 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:13:43,009 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:13:43,017 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:13:43,585 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2779021744538985918296263, Commission=0.10000000, Final PnL=-445.3779021744538985918296263
2025-06-25 22:13:43,612 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:13:43,621 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:13:43,717 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:13:44,341 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612330198537095088819226750, Commission=0.10000000, Final PnL=-0.3612330198537095088819226750
2025-06-25 22:13:44,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229486988107677762850176643, Commission=0.10000000, Final PnL=-0.5229486988107677762850176643
2025-06-25 22:13:44,348 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612330198537095088819226750, Commission=0.10000000, Final PnL=-0.3612330198537095088819226750
2025-06-25 22:13:44,353 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:14:42,984 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:14:42,991 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:14:43,018 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:14:43,027 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:14:43,520 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3055994426682258686538198, Commission=0.10000000, Final PnL=-445.4055994426682258686538198
2025-06-25 22:14:43,553 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:14:43,561 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:14:43,586 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:14:44,062 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612492691240685219511588271, Commission=0.10000000, Final PnL=-0.3612492691240685219511588271
2025-06-25 22:14:44,063 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229750071532537974447333391, Commission=0.10000000, Final PnL=-0.5229750071532537974447333391
2025-06-25 22:14:44,065 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612492691240685219511588271, Commission=0.10000000, Final PnL=-0.3612492691240685219511588271
2025-06-25 22:14:44,068 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:15:42,982 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:15:42,994 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:15:43,047 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:15:43,060 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:15:43,641 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3111393097957254111617029, Commission=0.10000000, Final PnL=-445.4111393097957254111617029
2025-06-25 22:15:43,674 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:15:43,693 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:15:43,722 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:15:44,389 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:15:44,391 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229802692145007588763653554, Commission=0.10000000, Final PnL=-0.5229802692145007588763653554
2025-06-25 22:15:44,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:15:44,394 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:16:42,987 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:16:42,999 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:16:43,064 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:16:43,074 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:16:43,646 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3111393097957254111617029, Commission=0.10000000, Final PnL=-445.4111393097957254111617029
2025-06-25 22:16:43,700 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:16:43,711 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:16:43,748 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:16:44,358 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:16:44,363 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229802692145007588763653554, Commission=0.10000000, Final PnL=-0.5229802692145007588763653554
2025-06-25 22:16:44,365 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:16:44,367 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:17:42,985 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:17:42,995 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:17:43,036 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:17:43,048 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:17:43,681 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3166793147634391211853547, Commission=0.10000000, Final PnL=-445.4166793147634391211853547
2025-06-25 22:17:43,716 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:17:43,725 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:17:43,766 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:17:44,485 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612557693982408778193851781, Commission=0.10000000, Final PnL=-0.3612557693982408778193851781
2025-06-25 22:17:44,487 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229855314066757069456712407, Commission=0.10000000, Final PnL=-0.5229855314066757069456712407
2025-06-25 22:17:44,489 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612557693982408778193851781, Commission=0.10000000, Final PnL=-0.3612557693982408778193851781
2025-06-25 22:17:44,493 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:18:21,927 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:18:21,928 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:18:21,928 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:18:21,929 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:18:21,930 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:18:23,995 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:18:23,995 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:18:23,995 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:18:23,995 - INFO - app.main - Redis client connection closed.
2025-06-25 22:18:23,996 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:18:26,520 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:18:26,533 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:18:26,534 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:18:27,387 - INFO - app.main - Application startup event triggered.
2025-06-25 22:18:27,419 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:18:27,420 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:18:27,433 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:18:27,438 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:18:27,438 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:18:27,438 - INFO - app.main - Redis publisher background task started
2025-06-25 22:18:27,438 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:18:27,438 - INFO - app.main - Generating initial service account token...
2025-06-25 22:18:27,438 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:18:28,578 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:18:28,580 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:18:28,580 - INFO - app.main - Application startup event finished.
2025-06-25 22:18:28,580 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:18:28,580 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:18:29,221 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:19:27,443 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:19:27,468 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:19:27,509 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:19:27,516 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:19:28,007 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2945201219132922808981775, Commission=0.10000000, Final PnL=-445.3945201219132922808981775
2025-06-25 22:19:28,038 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:19:28,044 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:19:28,063 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:19:28,583 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:19:28,585 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229644834235242893574671892, Commission=0.10000000, Final PnL=-0.5229644834235242893574671892
2025-06-25 22:19:28,587 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:19:28,593 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:20:27,439 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:20:27,444 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:20:27,476 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:20:27,486 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:20:27,995 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3055994426682258686538198, Commission=0.10000000, Final PnL=-445.4055994426682258686538198
2025-06-25 22:20:28,023 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:20:28,029 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:20:28,041 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:20:28,607 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612492691240685219511588271, Commission=0.10000000, Final PnL=-0.3612492691240685219511588271
2025-06-25 22:20:28,609 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229750071532537974447333391, Commission=0.10000000, Final PnL=-0.5229750071532537974447333391
2025-06-25 22:20:28,611 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612492691240685219511588271, Commission=0.10000000, Final PnL=-0.3612492691240685219511588271
2025-06-25 22:20:28,614 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:21:26,052 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:21:26,052 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:21:26,052 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:21:26,052 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:21:26,053 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:21:27,926 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:21:27,927 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:21:27,927 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:21:27,928 - INFO - app.main - Redis client connection closed.
2025-06-25 22:21:27,928 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:30:36,913 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:30:36,918 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:30:36,918 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:30:37,496 - INFO - app.main - Application startup event triggered.
2025-06-25 22:30:37,529 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:30:37,529 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:30:37,543 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:30:37,549 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:30:37,549 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:30:37,549 - INFO - app.main - Redis publisher background task started
2025-06-25 22:30:37,549 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:30:37,549 - INFO - app.main - Generating initial service account token...
2025-06-25 22:30:37,549 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:30:38,694 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:30:38,697 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:30:38,697 - INFO - app.main - Application startup event finished.
2025-06-25 22:30:38,697 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:30:38,697 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:30:39,318 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:31:37,556 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:31:37,599 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:31:37,683 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:31:37,702 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:31:38,282 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.4108804937534219302175103, Commission=0.10000000, Final PnL=-445.5108804937534219302175103
2025-06-25 22:31:38,358 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:31:38,422 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:31:38,556 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:31:39,245 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613142864253449970757686995, Commission=0.10000000, Final PnL=-0.3613142864253449970757686995
2025-06-25 22:31:39,247 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4230802732600823762179112278, Commission=0.10000000, Final PnL=-0.5230802732600823762179112278
2025-06-25 22:31:39,249 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613142864253449970757686995, Commission=0.10000000, Final PnL=-0.3613142864253449970757686995
2025-06-25 22:31:39,254 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:32:37,558 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:32:37,565 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:32:37,594 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:32:37,607 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:32:37,744 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:32:37,745 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:32:37,745 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:32:37,746 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:32:37,748 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:32:38,654 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:32:38,654 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:32:38,654 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:32:38,671 - INFO - app.main - Redis client connection closed.
2025-06-25 22:32:38,671 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:40:04,500 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:40:04,513 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:40:04,513 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:40:05,574 - INFO - app.main - Application startup event triggered.
2025-06-25 22:40:05,609 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:40:05,609 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:40:05,637 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:40:05,650 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:40:05,650 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:40:05,650 - INFO - app.main - Redis publisher background task started
2025-06-25 22:40:05,650 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:40:05,650 - INFO - app.main - Generating initial service account token...
2025-06-25 22:40:05,650 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:40:06,583 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:40:06,591 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:40:06,591 - INFO - app.main - Application startup event finished.
2025-06-25 22:40:06,592 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:40:06,592 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:40:07,244 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:40:19,111 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:40:19,112 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:40:19,112 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:40:19,119 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:40:19,120 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:40:21,341 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:40:21,342 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:40:21,342 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:40:21,343 - INFO - app.main - Redis client connection closed.
2025-06-25 22:40:21,344 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:40:23,944 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:40:23,957 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:40:23,957 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:40:24,663 - INFO - app.main - Application startup event triggered.
2025-06-25 22:40:24,701 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:40:24,702 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:40:24,717 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:40:24,726 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:40:24,727 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:40:24,727 - INFO - app.main - Redis publisher background task started
2025-06-25 22:40:24,727 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:40:24,727 - INFO - app.main - Generating initial service account token...
2025-06-25 22:40:24,727 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:40:25,743 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:40:25,747 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:40:25,747 - INFO - app.main - Application startup event finished.
2025-06-25 22:40:25,747 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:40:25,748 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:40:26,478 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:40:40,721 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:40:40,722 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:40:40,722 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:40:40,723 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:40:41,921 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:40:41,921 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:40:41,921 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:40:41,922 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:40:41,923 - INFO - app.main - Redis client connection closed.
2025-06-25 22:40:41,923 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:40:43,715 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:40:43,723 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:40:43,723 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:40:44,447 - INFO - app.main - Application startup event triggered.
2025-06-25 22:40:44,483 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:40:44,483 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:40:44,501 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:40:44,506 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:40:44,506 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:40:44,506 - INFO - app.main - Redis publisher background task started
2025-06-25 22:40:44,506 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:40:44,506 - INFO - app.main - Generating initial service account token...
2025-06-25 22:40:44,506 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:40:45,416 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:40:45,419 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:40:45,419 - INFO - app.main - Application startup event finished.
2025-06-25 22:40:45,419 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:40:45,419 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:40:46,011 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:41:44,507 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:41:44,530 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:41:44,572 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:41:44,578 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:41:45,200 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.3111393097957254111617029, Commission=0.10000000, Final PnL=-445.4111393097957254111617029
2025-06-25 22:41:45,232 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:41:45,242 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:41:45,274 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:41:46,149 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:41:46,153 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229802692145007588763653554, Commission=0.10000000, Final PnL=-0.5229802692145007588763653554
2025-06-25 22:41:46,157 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612525192207210569530491901, Commission=0.10000000, Final PnL=-0.3612525192207210569530491901
2025-06-25 22:41:46,163 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:42:33,635 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:42:33,635 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:42:33,635 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:42:33,636 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:42:33,637 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:42:35,469 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:42:35,469 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:42:35,469 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:42:35,471 - INFO - app.main - Redis client connection closed.
2025-06-25 22:42:35,471 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:42:37,931 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:42:37,941 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:42:37,941 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:42:38,735 - INFO - app.main - Application startup event triggered.
2025-06-25 22:42:38,771 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:42:38,771 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:42:38,786 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:42:38,793 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:42:38,794 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:42:38,794 - INFO - app.main - Redis publisher background task started
2025-06-25 22:42:38,794 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:42:38,794 - INFO - app.main - Generating initial service account token...
2025-06-25 22:42:38,794 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:42:39,769 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:42:39,774 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:42:39,774 - INFO - app.main - Application startup event finished.
2025-06-25 22:42:39,774 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:42:39,775 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:42:40,367 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:43:22,039 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:43:22,040 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:43:22,040 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:43:22,041 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:43:23,686 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:43:23,687 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:43:23,687 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:43:23,689 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:43:23,691 - INFO - app.main - Redis client connection closed.
2025-06-25 22:43:23,692 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:43:25,664 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:43:25,670 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:43:25,670 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:43:26,422 - INFO - app.main - Application startup event triggered.
2025-06-25 22:43:26,464 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:43:26,464 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:43:26,475 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:43:26,481 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:43:26,481 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:43:26,481 - INFO - app.main - Redis publisher background task started
2025-06-25 22:43:26,481 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:43:26,481 - INFO - app.main - Generating initial service account token...
2025-06-25 22:43:26,481 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:43:27,288 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:43:27,291 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:43:27,292 - INFO - app.main - Application startup event finished.
2025-06-25 22:43:27,292 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:43:27,292 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:43:27,946 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:43:27,964 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:43:28,763 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:43:28,763 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:43:28,764 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:43:28,764 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:43:28,764 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:43:28,768 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:43:28,768 - INFO - app.main - Redis client connection closed.
2025-06-25 22:43:28,768 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:43:30,771 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:43:30,777 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:43:30,778 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:43:31,650 - INFO - app.main - Application startup event triggered.
2025-06-25 22:43:31,684 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:43:31,684 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:43:31,699 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:43:31,706 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:43:31,706 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:43:31,706 - INFO - app.main - Redis publisher background task started
2025-06-25 22:43:31,706 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:43:31,706 - INFO - app.main - Generating initial service account token...
2025-06-25 22:43:31,706 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:43:33,441 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:43:33,445 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:43:33,445 - INFO - app.main - Application startup event finished.
2025-06-25 22:43:33,446 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:43:33,446 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:43:34,265 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:44:10,856 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:44:10,857 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:44:10,858 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:44:10,859 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:44:12,557 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:44:12,558 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:44:12,558 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:44:12,560 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:44:12,563 - INFO - app.main - Redis client connection closed.
2025-06-25 22:44:12,563 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:44:15,212 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:44:15,218 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:44:15,219 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:44:15,990 - INFO - app.main - Application startup event triggered.
2025-06-25 22:44:16,022 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:44:16,023 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:44:16,031 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:44:16,035 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:44:16,035 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:44:16,035 - INFO - app.main - Redis publisher background task started
2025-06-25 22:44:16,035 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:44:16,035 - INFO - app.main - Generating initial service account token...
2025-06-25 22:44:16,035 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:44:16,958 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:44:16,961 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:44:16,961 - INFO - app.main - Application startup event finished.
2025-06-25 22:44:16,961 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:44:16,961 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:44:17,677 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:44:17,698 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:44:17,698 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:44:17,699 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:44:17,700 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:44:19,418 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:44:19,418 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:44:19,419 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:44:19,419 - INFO - app.main - Redis client connection closed.
2025-06-25 22:44:19,419 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:44:21,919 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:44:21,927 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:44:21,927 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:44:23,022 - INFO - app.main - Application startup event triggered.
2025-06-25 22:44:23,060 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:44:23,060 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:44:23,080 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:44:23,090 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:44:23,090 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:44:23,090 - INFO - app.main - Redis publisher background task started
2025-06-25 22:44:23,090 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:44:23,090 - INFO - app.main - Generating initial service account token...
2025-06-25 22:44:23,090 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:44:24,183 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:44:24,187 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:44:24,187 - INFO - app.main - Application startup event finished.
2025-06-25 22:44:24,187 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:44:24,188 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:44:24,849 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:10,882 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:45:10,882 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:45:10,883 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:45:10,885 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:45:12,242 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:45:12,242 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:45:12,242 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:45:12,244 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:45:12,246 - INFO - app.main - Redis client connection closed.
2025-06-25 22:45:12,247 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:45:14,649 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:45:14,656 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:45:14,657 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:45:15,353 - INFO - app.main - Application startup event triggered.
2025-06-25 22:45:15,389 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:45:15,389 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:45:15,405 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:45:15,412 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:45:15,413 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:45:15,413 - INFO - app.main - Redis publisher background task started
2025-06-25 22:45:15,413 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:45:15,413 - INFO - app.main - Generating initial service account token...
2025-06-25 22:45:15,413 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:45:16,554 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:45:16,558 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:45:16,558 - INFO - app.main - Application startup event finished.
2025-06-25 22:45:16,559 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:16,559 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:45:17,275 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:17,282 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:45:19,092 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:45:19,092 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:45:19,092 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:45:19,092 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:45:19,092 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:45:19,095 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:45:19,095 - INFO - app.main - Redis client connection closed.
2025-06-25 22:45:19,095 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:45:20,700 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:45:20,706 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:45:20,706 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:45:21,312 - INFO - app.main - Application startup event triggered.
2025-06-25 22:45:21,343 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:45:21,343 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:45:21,351 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:45:21,357 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:45:21,357 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:45:21,357 - INFO - app.main - Redis publisher background task started
2025-06-25 22:45:21,357 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:45:21,357 - INFO - app.main - Generating initial service account token...
2025-06-25 22:45:21,357 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:45:22,184 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:45:22,187 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:45:22,187 - INFO - app.main - Application startup event finished.
2025-06-25 22:45:22,187 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:22,188 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:45:22,811 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:34,344 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 75.0
2025-06-25 22:45:34,366 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 4, User ID: 4, Amount: 75.0
2025-06-25 22:45:53,090 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:45:53,091 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:45:53,091 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:45:53,092 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:45:53,493 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:45:53,494 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:45:53,494 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:45:53,497 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:45:53,499 - INFO - app.main - Redis client connection closed.
2025-06-25 22:45:53,499 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:45:55,936 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:45:55,942 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:45:55,942 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:45:56,618 - INFO - app.main - Application startup event triggered.
2025-06-25 22:45:56,649 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:45:56,649 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:45:56,680 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:45:56,689 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:45:56,689 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:45:56,690 - INFO - app.main - Redis publisher background task started
2025-06-25 22:45:56,690 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:45:56,690 - INFO - app.main - Generating initial service account token...
2025-06-25 22:45:56,690 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:45:57,525 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:45:57,529 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:45:57,529 - INFO - app.main - Application startup event finished.
2025-06-25 22:45:57,529 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:45:57,529 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:45:58,133 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:46:13,427 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:46:13,435 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:46:13,435 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:46:14,175 - INFO - app.main - Application startup event triggered.
2025-06-25 22:46:14,210 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:46:14,210 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:46:14,218 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:46:14,225 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:46:14,225 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:46:14,225 - INFO - app.main - Redis publisher background task started
2025-06-25 22:46:14,225 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:46:14,225 - INFO - app.main - Generating initial service account token...
2025-06-25 22:46:14,225 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:46:15,014 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:46:15,019 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:46:15,019 - INFO - app.main - Application startup event finished.
2025-06-25 22:46:15,020 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:46:15,021 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:46:15,657 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:47:14,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:47:14,245 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:47:14,283 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:47:14,291 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:47:14,827 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2945201219132922808981775, Commission=0.10000000, Final PnL=-445.3945201219132922808981775
2025-06-25 22:47:14,864 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:47:14,870 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:47:14,897 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:47:15,442 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:47:15,445 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229644834235242893574671892, Commission=0.10000000, Final PnL=-0.5229644834235242893574671892
2025-06-25 22:47:15,447 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:47:15,451 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:47:35,561 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 75.0
2025-06-25 22:47:35,584 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 5, User ID: 4, Amount: 75.0
2025-06-25 22:48:14,232 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:48:14,247 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:48:14,407 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:48:14,462 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:48:15,446 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2889806682755703729505138, Commission=0.10000000, Final PnL=-445.3889806682755703729505138
2025-06-25 22:48:15,489 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:48:15,499 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:48:15,530 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:48:16,265 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:48:16,268 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229644834235242893574671892, Commission=0.10000000, Final PnL=-0.5229644834235242893574671892
2025-06-25 22:48:16,271 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:48:16,278 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:49:14,227 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:49:14,236 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:49:14,259 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:49:14,267 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:49:14,791 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2945201219132922808981775, Commission=0.10000000, Final PnL=-445.3945201219132922808981775
2025-06-25 22:49:14,814 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:49:14,820 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:49:14,839 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:49:15,360 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:49:15,362 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229644834235242893574671892, Commission=0.10000000, Final PnL=-0.5229644834235242893574671892
2025-06-25 22:49:15,365 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612427691733532375443179698, Commission=0.10000000, Final PnL=-0.3612427691733532375443179698
2025-06-25 22:49:15,367 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:50:14,226 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:50:14,235 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:50:14,264 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:50:14,270 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:50:15,049 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2889806682755703729505138, Commission=0.10000000, Final PnL=-445.3889806682755703729505138
2025-06-25 22:50:15,085 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:50:15,093 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:50:15,127 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:50:15,765 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612395193192844525166073694, Commission=0.10000000, Final PnL=-0.3612395193192844525166073694
2025-06-25 22:50:15,768 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229592217550319707411738362, Commission=0.10000000, Final PnL=-0.5229592217550319707411738362
2025-06-25 22:50:15,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612395193192844525166073694, Commission=0.10000000, Final PnL=-0.3612395193192844525166073694
2025-06-25 22:50:15,773 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:51:14,239 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:51:14,253 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:51:14,292 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:51:14,300 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:51:15,199 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2612854672786754736226692, Commission=0.10000000, Final PnL=-445.3612854672786754736226692
2025-06-25 22:51:15,234 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:51:15,243 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:51:15,273 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:51:16,108 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:51:16,111 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229329153760993145998930229, Commission=0.10000000, Final PnL=-0.5229329153760993145998930229
2025-06-25 22:51:16,112 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:51:16,115 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:52:14,224 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:52:14,234 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:52:14,273 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:52:14,281 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:52:14,953 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2779021744538985918296263, Commission=0.10000000, Final PnL=-445.3779021744538985918296263
2025-06-25 22:52:14,979 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:52:14,987 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:52:15,014 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:52:15,688 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612330198537095088819226750, Commission=0.10000000, Final PnL=-0.3612330198537095088819226750
2025-06-25 22:52:15,690 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229486988107677762850176643, Commission=0.10000000, Final PnL=-0.5229486988107677762850176643
2025-06-25 22:52:15,693 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612330198537095088819226750, Commission=0.10000000, Final PnL=-0.3612330198537095088819226750
2025-06-25 22:52:15,697 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:53:14,227 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:53:14,240 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:53:14,280 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:53:14,287 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:53:15,019 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2723631342596623916207441, Commission=0.10000000, Final PnL=-445.3723631342596623916207441
2025-06-25 22:53:15,108 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:53:15,119 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:53:15,175 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:53:15,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:53:15,944 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229329153760993145998930229, Commission=0.10000000, Final PnL=-0.5229329153760993145998930229
2025-06-25 22:53:15,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:53:15,948 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:54:14,229 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:54:14,243 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:54:14,287 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:54:14,298 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:54:15,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2612854672786754736226692, Commission=0.10000000, Final PnL=-445.3612854672786754736226692
2025-06-25 22:54:15,100 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:54:15,106 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:54:15,145 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:54:15,895 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:54:15,897 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229329153760993145998930229, Commission=0.10000000, Final PnL=-0.5229329153760993145998930229
2025-06-25 22:54:15,899 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:54:15,902 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:55:14,224 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:55:14,235 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:55:14,267 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:55:14,273 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:55:14,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2612854672786754736226692, Commission=0.10000000, Final PnL=-445.3612854672786754736226692
2025-06-25 22:55:14,981 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:55:14,989 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:55:15,018 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:55:15,703 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:55:15,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229329153760993145998930229, Commission=0.10000000, Final PnL=-0.5229329153760993145998930229
2025-06-25 22:55:15,707 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612232712617084001940515729, Commission=0.10000000, Final PnL=-0.3612232712617084001940515729
2025-06-25 22:55:15,713 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:56:14,225 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:56:14,236 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:56:14,280 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:56:14,289 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:56:14,976 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.2889806682755703729505138, Commission=0.10000000, Final PnL=-445.3889806682755703729505138
2025-06-25 22:56:15,012 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:56:15,021 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:56:15,052 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:56:15,694 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612395193192844525166073694, Commission=0.10000000, Final PnL=-0.3612395193192844525166073694
2025-06-25 22:56:15,696 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4229592217550319707411738362, Commission=0.10000000, Final PnL=-0.5229592217550319707411738362
2025-06-25 22:56:15,699 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2612395193192844525166073694, Commission=0.10000000, Final PnL=-0.3612395193192844525166073694
2025-06-25 22:56:15,707 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:57:14,228 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:57:14,240 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:57:14,285 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:57:14,296 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:57:15,083 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.5051215353404607514904103, Commission=0.10000000, Final PnL=-445.6051215353404607514904103
2025-06-25 22:57:15,110 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:57:15,116 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:57:15,143 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:57:15,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613630706427042365709165132, Commission=0.10000000, Final PnL=-0.3613630706427042365709165132
2025-06-25 22:57:15,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4231592572310449544481505451, Commission=0.10000000, Final PnL=-0.5231592572310449544481505451
2025-06-25 22:57:15,835 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613630706427042365709165132, Commission=0.10000000, Final PnL=-0.3613630706427042365709165132
2025-06-25 22:57:15,839 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:57:59,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 22:57:59,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 22:57:59,574 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 22:57:59,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 22:57:59,617 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 22:57:59,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 22:57:59,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 22:57:59,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 22:57:59,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 22:57:59,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 22:57:59,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 22:57:59,687 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 22:57:59,696 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 22:57:59,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 22:57:59,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 22:57:59,725 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 22:57:59,735 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 22:57:59,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 22:57:59,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 22:57:59,768 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 22:57:59,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 22:57:59,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 22:57:59,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 22:57:59,808 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 22:57:59,819 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 22:57:59,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 22:57:59,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 22:57:59,852 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 22:57:59,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 22:57:59,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 22:57:59,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 22:57:59,893 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 22:57:59,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 22:57:59,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 22:57:59,923 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 22:57:59,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 22:57:59,948 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 22:57:59,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 22:57:59,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 22:57:59,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 22:57:59,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 22:58:00,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 22:58:00,019 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 22:58:00,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 22:58:00,052 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 22:58:00,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 22:58:00,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 22:58:00,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 22:58:00,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 22:58:00,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 22:58:00,118 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 22:58:00,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 22:58:00,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 22:58:00,152 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 22:58:00,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 22:58:00,176 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 22:58:00,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 22:58:00,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 22:58:00,218 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 22:58:00,229 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 22:58:00,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 22:58:00,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 22:58:00,265 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 22:58:00,278 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 22:58:00,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 22:58:00,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 22:58:00,317 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 22:58:00,332 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 22:58:00,345 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 22:58:00,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 22:58:00,373 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 22:58:00,386 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 22:58:00,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 22:58:00,409 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 22:58:00,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 22:58:00,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 22:58:00,444 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 22:58:00,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 22:58:00,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 22:58:14,225 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:58:14,236 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:58:14,280 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:58:14,288 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:58:14,994 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5240800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.0200000000000000000000000, PnL USD=-445.6088818082246340734840187, Commission=0.10000000, Final PnL=-445.7088818082246340734840187
2025-06-25 22:58:15,024 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:58:15,030 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:58:15,060 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:58:15,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364831225729363735935477447, Commission=0.10000000, Final PnL=-0.3364831225729363735935477447
2025-06-25 22:58:15,787 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.77000000000000000000000000, PnL USD=-0.9583789704271631982475355969, Commission=0.10000000, Final PnL=-1.058378970427163198247535597
2025-06-25 22:58:15,791 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364831225729363735935477447, Commission=0.10000000, Final PnL=-0.3364831225729363735935477447
2025-06-25 22:58:15,794 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:58:38,061 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 100
2025-06-25 22:58:38,094 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 6, User ID: 4, Amount: 100
2025-06-25 22:59:14,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 22:59:14,238 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 22:59:14,265 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 22:59:14,276 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 22:59:14,802 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9400000000000000000000000, PnL USD=-445.5037650133797996141639181, Commission=0.10000000, Final PnL=-445.6037650133797996141639181
2025-06-25 22:59:14,823 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 22:59:14,829 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 22:59:14,852 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 22:59:15,379 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364801792270832036841122659, Commission=0.10000000, Final PnL=-0.3364801792270832036841122659
2025-06-25 22:59:15,382 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.77000000000000000000000000, PnL USD=-0.9583670421308108780882444458, Commission=0.10000000, Final PnL=-1.058367042130810878088244446
2025-06-25 22:59:15,387 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364801792270832036841122659, Commission=0.10000000, Final PnL=-0.3364801792270832036841122659
2025-06-25 22:59:15,391 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 22:59:16,520 - INFO - app.main - Application shutdown event triggered.
2025-06-25 22:59:16,521 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 22:59:16,521 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 22:59:16,522 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 22:59:16,524 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 22:59:16,869 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 22:59:16,869 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 22:59:16,869 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 22:59:16,872 - INFO - app.main - Redis client connection closed.
2025-06-25 22:59:16,872 - INFO - app.main - Application shutdown event finished.
2025-06-25 22:59:19,626 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 22:59:19,634 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 22:59:19,634 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 22:59:20,560 - INFO - app.main - Application startup event triggered.
2025-06-25 22:59:20,592 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 22:59:20,592 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 22:59:20,606 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 22:59:20,613 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 22:59:20,614 - INFO - app.main - Firebase events processor background task started
2025-06-25 22:59:20,614 - INFO - app.main - Redis publisher background task started
2025-06-25 22:59:20,614 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 22:59:20,614 - INFO - app.main - Generating initial service account token...
2025-06-25 22:59:20,614 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 22:59:21,556 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 22:59:21,558 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 22:59:21,558 - INFO - app.main - Application startup event finished.
2025-06-25 22:59:21,559 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:59:21,560 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 22:59:22,144 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 22:59:22,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 22:59:22,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 22:59:22,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 22:59:22,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 22:59:22,353 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 22:59:22,361 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 22:59:22,367 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 22:59:22,373 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 22:59:22,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 22:59:22,385 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 22:59:22,391 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 22:59:22,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 22:59:22,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 22:59:22,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 22:59:22,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 22:59:22,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 22:59:22,424 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 22:59:22,429 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 22:59:22,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 22:59:22,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 22:59:22,448 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 22:59:22,453 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 22:59:22,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 22:59:22,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 22:59:22,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 22:59:22,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 22:59:22,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 22:59:22,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 22:59:22,502 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 22:59:22,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 22:59:22,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 22:59:22,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 22:59:22,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 22:59:22,553 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 22:59:22,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 22:59:22,579 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 22:59:22,588 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 22:59:22,602 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 22:59:22,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 22:59:22,628 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 22:59:22,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 22:59:22,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 22:59:22,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 22:59:22,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 22:59:22,661 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 22:59:22,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 22:59:22,672 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 22:59:22,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 22:59:22,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 22:59:22,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 22:59:22,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 22:59:22,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 22:59:22,711 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 22:59:22,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 22:59:22,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 22:59:22,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 22:59:22,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 22:59:22,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 22:59:22,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 22:59:22,752 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 22:59:22,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 22:59:22,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 22:59:22,768 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 22:59:22,773 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 22:59:22,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 22:59:22,783 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 22:59:22,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 22:59:22,794 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 22:59:22,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 22:59:22,805 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 22:59:22,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 22:59:22,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 22:59:22,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 22:59:22,825 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 22:59:22,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 22:59:22,837 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 22:59:22,843 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 22:59:22,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 22:59:22,855 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:00:20,643 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:00:20,666 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:00:20,723 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 23:00:20,742 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:00:21,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.5106663679585791451970229, Commission=0.10000000, Final PnL=-445.6106663679585791451970229
2025-06-25 23:00:22,033 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:00:22,052 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:00:22,129 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:00:23,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613663235715085815276239312, Commission=0.10000000, Final PnL=-0.3613663235715085815276239312
2025-06-25 23:00:23,708 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.74000000000000000000000000, PnL USD=-0.9210051402043635730021033766, Commission=0.10000000, Final PnL=-1.021005140204363573002103377
2025-06-25 23:00:23,710 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613663235715085815276239312, Commission=0.10000000, Final PnL=-0.3613663235715085815276239312
2025-06-25 23:00:23,715 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:01:20,612 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:01:20,627 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:01:20,684 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 23:01:20,695 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:01:21,679 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5240500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.0500000000000000000000000, PnL USD=-445.6573149784670533469418237, Commission=0.10000000, Final PnL=-445.7573149784670533469418237
2025-06-25 23:01:21,733 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:01:21,751 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:01:21,836 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:01:23,110 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.31000000000000000000000000, PnL USD=-0.3858408841979488200736831624, Commission=0.10000000, Final PnL=-0.4858408841979488200736831624
2025-06-25 23:01:23,112 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5245100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.63000000000000000000000000, PnL USD=-0.7841282485313153440207109429, Commission=0.10000000, Final PnL=-0.8841282485313153440207109429
2025-06-25 23:01:23,115 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.31000000000000000000000000, PnL USD=-0.3858408841979488200736831624, Commission=0.10000000, Final PnL=-0.4858408841979488200736831624
2025-06-25 23:01:23,116 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:01:24,644 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:01:24,644 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:01:24,645 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:01:24,645 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:01:24,646 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:01:24,723 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:01:24,723 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:01:24,723 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:01:24,724 - INFO - app.main - Redis client connection closed.
2025-06-25 23:01:24,724 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:05:39,778 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:05:39,789 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:05:39,789 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:05:41,024 - INFO - app.main - Application startup event triggered.
2025-06-25 23:05:41,071 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:05:41,071 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:05:41,091 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:05:41,102 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:05:41,103 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:05:41,103 - INFO - app.main - Redis publisher background task started
2025-06-25 23:05:41,103 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:05:41,103 - INFO - app.main - Generating initial service account token...
2025-06-25 23:05:41,103 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:05:42,463 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:05:42,467 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:05:42,468 - INFO - app.main - Application startup event finished.
2025-06-25 23:05:42,468 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:05:42,468 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:05:43,196 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:05:45,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:05:45,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:05:45,925 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:05:46,022 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:05:46,061 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:05:46,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:05:46,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:05:46,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:05:46,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:05:46,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:05:46,278 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:05:46,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:05:46,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:05:46,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:05:46,396 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:05:46,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:05:46,448 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:05:46,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:05:46,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:05:46,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:05:46,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:05:46,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:05:46,620 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:05:46,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:05:46,690 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:05:46,720 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:05:46,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:05:46,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:05:46,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:05:46,829 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:05:46,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:05:46,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:05:46,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:05:46,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:05:46,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:05:46,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:05:47,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:05:47,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:05:47,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:05:47,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:05:47,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:05:47,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:05:47,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:05:47,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:05:47,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:05:47,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:05:47,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:05:47,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:05:47,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:05:47,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:05:47,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:05:47,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:05:47,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:05:47,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:05:47,449 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:05:47,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:05:47,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:05:47,551 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:05:47,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:05:47,597 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:05:47,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:05:47,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:05:47,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:05:47,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:05:47,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:05:47,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:05:47,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:05:47,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:05:47,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:05:47,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:05:47,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:05:47,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:05:47,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:05:47,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:05:47,917 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:05:47,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:05:47,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:05:47,987 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:05:48,012 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:06:41,103 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:06:41,115 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:06:41,179 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-25 23:06:41,187 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:06:41,754 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5240700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.0300000000000000000000000, PnL USD=-445.5714161263425136584819484, Commission=0.10000000, Final PnL=-445.6714161263425136584819484
2025-06-25 23:06:41,789 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:06:41,806 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:06:41,864 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:06:42,750 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.29000000000000000000000000, PnL USD=-0.3609074956753325949248939056, Commission=0.10000000, Final PnL=-0.4609074956753325949248939056
2025-06-25 23:06:42,753 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5245400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.66000000000000000000000000, PnL USD=-0.8213756798128259056911378542, Commission=0.10000000, Final PnL=-0.9213756798128259056911378542
2025-06-25 23:06:42,756 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.29000000000000000000000000, PnL USD=-0.3609074956753325949248939056, Commission=0.10000000, Final PnL=-0.4609074956753325949248939056
2025-06-25 23:06:42,759 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:07:14,524 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:07:14,524 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:07:14,525 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:07:14,526 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:07:14,527 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:07:16,754 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:07:16,754 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:07:16,754 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:07:16,755 - INFO - app.main - Redis client connection closed.
2025-06-25 23:07:16,755 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:07:19,226 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:07:19,232 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:07:19,232 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:07:19,971 - INFO - app.main - Application startup event triggered.
2025-06-25 23:07:20,007 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:07:20,007 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:07:20,020 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:07:20,027 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:07:20,027 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:07:20,027 - INFO - app.main - Redis publisher background task started
2025-06-25 23:07:20,027 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:07:20,027 - INFO - app.main - Generating initial service account token...
2025-06-25 23:07:20,027 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:07:20,951 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:07:20,954 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:07:20,954 - INFO - app.main - Application startup event finished.
2025-06-25 23:07:20,954 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:20,954 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:07:21,593 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:21,614 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:07:23,638 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:07:23,638 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:07:23,638 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:07:23,639 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:07:23,639 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:07:23,642 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:07:23,643 - INFO - app.main - Redis client connection closed.
2025-06-25 23:07:23,643 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:07:25,746 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:07:25,755 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:07:25,755 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:07:26,634 - INFO - app.main - Application startup event triggered.
2025-06-25 23:07:26,667 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:07:26,667 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:07:26,681 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:07:26,692 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:07:26,692 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:07:26,692 - INFO - app.main - Redis publisher background task started
2025-06-25 23:07:26,692 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:07:26,692 - INFO - app.main - Generating initial service account token...
2025-06-25 23:07:26,692 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:07:27,730 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:07:27,733 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:07:27,733 - INFO - app.main - Application startup event finished.
2025-06-25 23:07:27,733 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:27,734 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:07:28,453 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:28,483 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:07:28,483 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:07:28,483 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:07:28,485 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:07:30,497 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:07:30,497 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:07:30,499 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:07:30,500 - INFO - app.main - Redis client connection closed.
2025-06-25 23:07:30,500 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:07:32,674 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:07:32,681 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:07:32,681 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:07:33,485 - INFO - app.main - Application startup event triggered.
2025-06-25 23:07:33,533 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:07:33,533 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:07:33,551 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:07:33,559 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:07:33,559 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:07:33,559 - INFO - app.main - Redis publisher background task started
2025-06-25 23:07:33,559 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:07:33,559 - INFO - app.main - Generating initial service account token...
2025-06-25 23:07:33,559 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:07:34,592 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:07:34,596 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:07:34,596 - INFO - app.main - Application startup event finished.
2025-06-25 23:07:34,596 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:34,597 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:07:35,210 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:07:36,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:07:36,082 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:07:36,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:07:36,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:07:36,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:07:36,120 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:07:36,128 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:07:36,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:07:36,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:07:36,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:07:36,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:07:36,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:07:36,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:07:36,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:07:36,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:07:36,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:07:36,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:07:36,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:07:36,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:07:36,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:07:36,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:07:36,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:07:36,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:07:36,292 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:07:36,301 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:07:36,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:07:36,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:07:36,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:07:36,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:07:36,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:07:36,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:07:36,365 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:07:36,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:07:36,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:07:36,391 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:07:36,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:07:36,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:07:36,429 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:07:36,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:07:36,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:07:36,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:07:36,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:07:36,461 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:07:36,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:07:36,480 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:07:36,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:07:36,502 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:07:36,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:07:36,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:07:36,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:07:36,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:07:36,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:07:36,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:07:36,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:07:36,602 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:07:36,613 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:07:36,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:07:36,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:07:36,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:07:36,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:07:36,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:07:36,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:07:36,686 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:07:36,696 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:07:36,708 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:07:36,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:07:36,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:07:36,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:07:36,747 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:07:36,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:07:36,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:07:36,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:07:36,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:07:36,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:07:36,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:07:36,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:07:36,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:07:36,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:07:36,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:07:56,068 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:07:56,068 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:07:56,069 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:07:56,070 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:07:56,070 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:07:58,250 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:07:58,251 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:07:58,251 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:07:58,251 - INFO - app.main - Redis client connection closed.
2025-06-25 23:07:58,251 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:08:00,646 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:08:00,653 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:08:00,653 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:08:01,479 - INFO - app.main - Application startup event triggered.
2025-06-25 23:08:01,515 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:08:01,515 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:08:01,527 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:08:01,533 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:08:01,533 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:08:01,533 - INFO - app.main - Redis publisher background task started
2025-06-25 23:08:01,533 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:08:01,533 - INFO - app.main - Generating initial service account token...
2025-06-25 23:08:01,533 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:08:02,447 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:08:02,449 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:08:02,449 - INFO - app.main - Application startup event finished.
2025-06-25 23:08:02,450 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:08:02,450 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:08:03,065 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:08:04,832 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:08:04,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:08:04,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:08:04,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:08:04,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:08:04,904 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:08:04,923 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:08:04,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:08:04,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:08:04,957 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:08:04,968 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:08:04,976 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:08:04,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:08:04,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:08:05,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:08:05,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:08:05,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:08:05,035 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:08:05,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:08:05,057 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:08:05,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:08:05,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:08:05,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:08:05,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:08:05,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:08:05,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:08:05,128 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:08:05,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:08:05,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:08:05,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:08:05,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:08:05,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:08:05,193 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:08:05,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:08:05,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:08:05,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:08:05,269 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:08:05,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:08:05,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:08:05,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:08:05,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:08:05,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:08:05,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:08:05,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:08:05,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:08:05,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:08:05,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:08:05,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:08:05,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:08:05,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:08:05,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:08:05,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:08:05,457 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:08:05,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:08:05,475 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:08:05,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:08:05,493 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:08:05,500 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:08:05,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:08:05,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:08:05,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:08:05,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:08:05,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:08:05,555 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:08:05,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:08:05,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:08:05,583 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:08:05,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:08:05,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:08:05,619 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:08:05,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:08:05,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:08:05,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:08:05,678 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:08:05,693 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:08:05,706 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:08:05,720 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:08:05,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:08:05,748 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:08:38,315 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:08:38,315 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:08:38,315 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:08:38,316 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:08:38,316 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:08:40,025 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:08:40,025 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:08:40,025 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:08:40,026 - INFO - app.main - Redis client connection closed.
2025-06-25 23:08:40,026 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:15:10,138 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:15:10,144 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:15:10,144 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:15:11,110 - INFO - app.main - Application startup event triggered.
2025-06-25 23:15:11,151 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:15:11,151 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:15:11,174 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:15:11,184 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:15:11,184 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:15:11,184 - INFO - app.main - Redis publisher background task started
2025-06-25 23:15:11,184 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:15:11,184 - INFO - app.main - Generating initial service account token...
2025-06-25 23:15:11,184 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:15:12,622 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:15:12,625 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:15:12,626 - INFO - app.main - Application startup event finished.
2025-06-25 23:15:12,626 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:15:12,627 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:15:13,337 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:15:13,656 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:15:13,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:15:13,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:15:13,690 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:15:13,704 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:15:13,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:15:13,730 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:15:13,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:15:13,760 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:15:13,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:15:13,794 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:15:13,806 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:15:13,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:15:13,836 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:15:13,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:15:13,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:15:13,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:15:13,895 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:15:13,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:15:13,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:15:13,925 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:15:13,947 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:15:13,957 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:15:13,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:15:13,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:15:13,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:15:13,997 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:15:14,005 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:15:14,010 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:15:14,020 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:15:14,028 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:15:14,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:15:14,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:15:14,061 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:15:14,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:15:14,087 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:15:14,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:15:14,101 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:15:14,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:15:14,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:15:14,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:15:14,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:15:14,159 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:15:14,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:15:14,194 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:15:14,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:15:14,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:15:14,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:15:14,263 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:15:14,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:15:14,284 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:15:14,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:15:14,301 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:15:14,308 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:15:14,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:15:14,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:15:14,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:15:14,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:15:14,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:15:14,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:15:14,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:15:14,392 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:15:14,404 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:15:14,488 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:15:14,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:15:14,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:15:14,563 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:15:14,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:15:14,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:15:14,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:15:14,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:15:14,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:15:14,678 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:15:14,703 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:15:14,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:15:14,732 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:15:14,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:15:14,748 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:15:14,758 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:16:11,183 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:16:11,220 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:16:11,255 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:16:12,078 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9400000000000000000000000, PnL USD=-445.4926755199322936761795711, Commission=0.10000000, Final PnL=-445.5926755199322936761795711
2025-06-25 23:16:12,086 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:16:12,086 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:16:12,131 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:16:12,142 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:16:12,201 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:16:13,448 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.20000000000000000000000000, PnL USD=-0.2489203081633415062167846964, Commission=0.10000000, Final PnL=-0.3489203081633415062167846964
2025-06-25 23:16:13,450 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.73000000000000000000000000, PnL USD=-0.9085591247961964976912641418, Commission=0.10000000, Final PnL=-1.008559124796196497691264142
2025-06-25 23:16:13,452 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.20000000000000000000000000, PnL USD=-0.2489203081633415062167846964, Commission=0.10000000, Final PnL=-0.3489203081633415062167846964
2025-06-25 23:16:13,455 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:16:49,922 - INFO - app.crud.money_request - Money request ID 6 approved by admin ID 10. Processing wallet update for user ID 4.
2025-06-25 23:16:49,988 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 87b75bd9-aec8-4f4a-98ce-1d718d606b1d.
2025-06-25 23:16:49,997 - INFO - app.crud.money_request - Wallet balance updated successfully for user ID 4 due to money request ID 6 approval.
2025-06-25 23:16:50,006 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 6 to status 1.
2025-06-25 23:17:11,189 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:17:11,198 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:17:11,237 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:17:11,913 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9100000000000000000000000, PnL USD=-445.3500236418385884578055397, Commission=0.10000000, Final PnL=-445.4500236418385884578055397
2025-06-25 23:17:11,922 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:17:11,922 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:17:11,956 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:17:11,967 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:17:12,001 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:17:12,834 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.14000000000000000000000000, PnL USD=-0.1742030211781101460816763308, Commission=0.10000000, Final PnL=-0.2742030211781101460816763308
2025-06-25 23:17:12,835 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.80000000000000000000000000, PnL USD=-0.9954458353034865490381504616, Commission=0.10000000, Final PnL=-1.095445835303486549038150462
2025-06-25 23:17:12,839 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.14000000000000000000000000, PnL USD=-0.1742030211781101460816763308, Commission=0.10000000, Final PnL=-0.2742030211781101460816763308
2025-06-25 23:17:12,843 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:17:52,687 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:17:52,687 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:17:52,687 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:17:52,687 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:17:53,076 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:17:53,077 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:17:53,078 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:17:53,079 - INFO - app.main - Redis client connection closed.
2025-06-25 23:17:53,079 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:20:58,472 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 62be0cd5-3782-4974-92b7-7ecdf50e14b1.
2025-06-25 23:21:44,972 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:21:44,983 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:21:44,983 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:21:46,043 - INFO - app.main - Application startup event triggered.
2025-06-25 23:21:46,082 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:21:46,082 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:21:46,110 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:21:46,117 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:21:46,117 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:21:46,117 - INFO - app.main - Redis publisher background task started
2025-06-25 23:21:46,117 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:21:46,117 - INFO - app.main - Generating initial service account token...
2025-06-25 23:21:46,117 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:21:47,072 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:21:47,073 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:21:47,073 - INFO - app.main - Application startup event finished.
2025-06-25 23:21:47,075 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:21:47,075 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:21:47,678 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:22:02,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:22:02,424 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:22:02,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:22:02,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:22:02,521 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:22:02,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:22:02,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:22:02,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:22:02,661 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:22:02,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:22:02,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:22:02,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:22:02,906 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:22:02,928 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:22:02,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:22:02,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:22:02,990 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:22:03,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:22:03,032 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:22:03,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:22:03,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:22:03,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:22:03,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:22:03,140 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:22:03,166 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:22:03,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:22:03,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:22:03,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:22:03,262 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:22:03,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:22:03,305 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:22:03,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:22:03,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:22:03,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:22:03,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:22:03,415 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:22:03,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:22:03,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:22:03,530 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:22:03,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:22:03,585 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:22:03,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:22:03,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:22:03,621 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:22:03,631 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:22:03,639 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:22:03,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:22:03,693 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:22:03,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:22:03,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:22:03,765 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:22:03,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:22:03,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:22:03,823 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:22:03,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:22:03,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:22:03,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:22:03,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:22:03,897 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:22:03,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:22:03,920 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:22:03,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:22:03,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:22:03,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:22:03,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:22:03,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:22:03,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:22:04,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:22:04,056 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:22:04,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:22:04,083 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:22:04,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:22:04,107 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:22:04,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:22:04,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:22:04,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:22:04,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:22:04,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:22:04,173 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:22:37,302 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 100
2025-06-25 23:22:37,343 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 7, User ID: 4, Amount: 100
2025-06-25 23:22:46,144 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:22:46,163 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:22:46,219 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:22:46,865 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.7800000000000000000000000, PnL USD=-445.1882636936017718935868402, Commission=0.10000000, Final PnL=-445.2882636936017718935868402
2025-06-25 23:22:46,874 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:22:46,875 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:22:46,903 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:22:46,942 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:22:46,990 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:22:47,493 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.04000000000000000000000000, PnL USD=-0.04977043387375729447921462255, Commission=0.10000000, Final PnL=-0.1497704338737572944792146226
2025-06-25 23:22:47,500 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5247800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.90000000000000000000000000, PnL USD=-1.119834762159539125782329007, Commission=0.10000000, Final PnL=-1.219834762159539125782329007
2025-06-25 23:22:47,507 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.04000000000000000000000000, PnL USD=-0.04977043387375729447921462255, Commission=0.10000000, Final PnL=-0.1497704338737572944792146226
2025-06-25 23:22:47,513 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:23:21,039 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 24e5cb6d-cda5-4bad-bd79-75f234d6e72e.
2025-06-25 23:23:21,053 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 7 to status 1.
2025-06-25 23:23:35,638 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 82ca2dff-5e93-4287-88eb-d6d9061e4dc1.
2025-06-25 23:23:35,649 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 7 to status 1.
2025-06-25 23:23:46,257 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:23:46,275 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:23:46,331 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:23:47,306 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5242700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.8300000000000000000000000, PnL USD=-445.2504790583082398029017246, Commission=0.10000000, Final PnL=-445.3504790583082398029017246
2025-06-25 23:23:47,324 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:23:47,324 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:23:47,350 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:23:47,357 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:23:47,386 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:23:48,211 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.09000000000000000000000000, PnL USD=-0.1119876564716422367667919269, Commission=0.10000000, Final PnL=-0.2119876564716422367667919269
2025-06-25 23:23:48,214 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5247300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.85000000000000000000000000, PnL USD=-1.057661200009954458353034865, Commission=0.10000000, Final PnL=-1.157661200009954458353034865
2025-06-25 23:23:48,216 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.09000000000000000000000000, PnL USD=-0.1119876564716422367667919269, Commission=0.10000000, Final PnL=-0.2119876564716422367667919269
2025-06-25 23:23:48,219 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:24:01,899 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:24:01,900 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:24:01,900 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:24:01,901 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:24:01,902 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:24:03,551 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:24:03,552 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:24:03,552 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:24:03,552 - INFO - app.main - Redis client connection closed.
2025-06-25 23:24:03,553 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:24:05,892 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:24:05,900 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:24:05,900 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:24:06,693 - INFO - app.main - Application startup event triggered.
2025-06-25 23:24:06,728 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:24:06,728 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:24:06,740 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:24:06,748 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:24:06,748 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:24:06,748 - INFO - app.main - Redis publisher background task started
2025-06-25 23:24:06,748 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:24:06,748 - INFO - app.main - Generating initial service account token...
2025-06-25 23:24:06,748 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:24:08,174 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:24:08,176 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:24:08,177 - INFO - app.main - Application startup event finished.
2025-06-25 23:24:08,177 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:24:08,177 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:24:08,781 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:24:09,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:24:09,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:24:09,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:24:09,096 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:24:09,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:24:09,120 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:24:09,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:24:09,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:24:09,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:24:09,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:24:09,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:24:09,190 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:24:09,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:24:09,207 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:24:09,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:24:09,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:24:09,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:24:09,238 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:24:09,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:24:09,257 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:24:09,265 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:24:09,273 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:24:09,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:24:09,291 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:24:09,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:24:09,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:24:09,313 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:24:09,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:24:09,327 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:24:09,336 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:24:09,343 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:24:09,351 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:24:09,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:24:09,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:24:09,375 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:24:09,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:24:09,389 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:24:09,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:24:09,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:24:09,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:24:09,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:24:09,427 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:24:09,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:24:09,442 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:24:09,449 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:24:09,459 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:24:09,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:24:09,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:24:09,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:24:09,493 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:24:09,502 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:24:09,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:24:09,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:24:09,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:24:09,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:24:09,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:24:09,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:24:09,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:24:09,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:24:09,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:24:09,584 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:24:09,593 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:24:09,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:24:09,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:24:09,617 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:24:09,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:24:09,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:24:09,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:24:09,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:24:09,661 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:24:09,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:24:09,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:24:09,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:24:09,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:24:09,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:24:09,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:24:09,725 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:24:09,735 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:24:09,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:25:06,748 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:25:06,759 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:25:06,794 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:25:07,359 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.7800000000000000000000000, PnL USD=-445.2769135034225264467952707, Commission=0.10000000, Final PnL=-445.3769135034225264467952707
2025-06-25 23:25:07,370 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:25:07,370 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:25:07,396 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:25:07,403 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:25:07,427 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:25:08,271 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.04000000000000000000000000, PnL USD=-0.04978220286247666459240821406, Commission=0.10000000, Final PnL=-0.1497822028624766645924082141
2025-06-25 23:25:08,273 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5247600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.88000000000000000000000000, PnL USD=-1.095208462974486621032980709, Commission=0.10000000, Final PnL=-1.195208462974486621032980709
2025-06-25 23:25:08,275 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.04000000000000000000000000, PnL USD=-0.04978220286247666459240821406, Commission=0.10000000, Final PnL=-0.1497822028624766645924082141
2025-06-25 23:25:08,277 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:25:09,393 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:25:09,393 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:25:09,394 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:25:09,394 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:25:09,395 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:25:09,599 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:25:09,599 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:25:09,599 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:25:09,599 - INFO - app.main - Redis client connection closed.
2025-06-25 23:25:09,599 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:25:11,995 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:25:12,003 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:25:12,003 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:25:12,832 - INFO - app.main - Application startup event triggered.
2025-06-25 23:25:12,866 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:25:12,866 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:25:12,881 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:25:12,885 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:25:12,885 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:25:12,885 - INFO - app.main - Redis publisher background task started
2025-06-25 23:25:12,885 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:25:12,886 - INFO - app.main - Generating initial service account token...
2025-06-25 23:25:12,886 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:25:13,838 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:25:13,842 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:25:13,842 - INFO - app.main - Application startup event finished.
2025-06-25 23:25:13,842 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:25:13,843 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:25:14,515 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:25:14,543 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:25:14,543 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:25:14,543 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:25:14,544 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:25:16,573 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:25:16,573 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:25:16,574 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:25:16,575 - INFO - app.main - Redis client connection closed.
2025-06-25 23:25:16,575 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:25:19,032 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:25:19,070 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:25:19,071 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:25:19,744 - INFO - app.main - Application startup event triggered.
2025-06-25 23:25:19,794 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:25:19,794 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:25:19,809 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:25:19,819 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:25:19,819 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:25:19,819 - INFO - app.main - Redis publisher background task started
2025-06-25 23:25:19,819 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:25:19,819 - INFO - app.main - Generating initial service account token...
2025-06-25 23:25:19,819 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:25:20,668 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:25:20,673 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:25:20,673 - INFO - app.main - Application startup event finished.
2025-06-25 23:25:20,674 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:25:20,674 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:25:21,376 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:25:51,426 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:25:51,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:25:51,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:25:51,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:25:51,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:25:51,473 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:25:51,481 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:25:51,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:25:51,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:25:51,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:25:51,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:25:51,522 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:25:51,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:25:51,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:25:51,548 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:25:51,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:25:51,563 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:25:51,574 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:25:51,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:25:51,593 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:25:51,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:25:51,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:25:51,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:25:51,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:25:51,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:25:51,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:25:51,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:25:51,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:25:51,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:25:51,687 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:25:51,694 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:25:51,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:25:51,712 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:25:51,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:25:51,731 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:25:51,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:25:51,747 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:25:51,756 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:25:51,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:25:51,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:25:51,786 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:25:51,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:25:51,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:25:51,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:25:51,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:25:51,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:25:51,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:25:51,862 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:25:51,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:25:51,889 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:25:51,904 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:25:51,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:25:51,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:25:51,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:25:51,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:25:51,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:25:51,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:25:51,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:25:51,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:25:51,993 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:25:52,002 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:25:52,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:25:52,026 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:25:52,042 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:25:52,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:25:52,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:25:52,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:25:52,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:25:52,107 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:25:52,118 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:25:52,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:25:52,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:25:52,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:25:52,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:25:52,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:25:52,174 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:25:52,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:25:52,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:25:52,217 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:26:19,815 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:26:19,865 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:26:19,910 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:26:20,568 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5242600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.8400000000000000000000000, PnL USD=-445.3626723751680191168417384, Commission=0.10000000, Final PnL=-445.4626723751680191168417384
2025-06-25 23:26:20,582 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:26:20,582 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:26:20,633 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:26:20,648 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:26:20,685 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:26:21,590 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.10000000000000000000000000, PnL USD=-0.1244586050679543983671031015, Commission=0.10000000, Final PnL=-0.2244586050679543983671031015
2025-06-25 23:26:21,593 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5247200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.84000000000000000000000000, PnL USD=-1.045452282570816946283666053, Commission=0.10000000, Final PnL=-1.145452282570816946283666053
2025-06-25 23:26:21,596 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.10000000000000000000000000, PnL USD=-0.1244586050679543983671031015, Commission=0.10000000, Final PnL=-0.2244586050679543983671031015
2025-06-25 23:26:21,600 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:27:12,085 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:27:12,085 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:27:12,085 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:27:12,087 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:27:13,815 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:27:13,815 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:27:13,815 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:27:13,816 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:27:13,817 - INFO - app.main - Redis client connection closed.
2025-06-25 23:27:13,817 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:27:16,257 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:27:16,265 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:27:16,265 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:27:17,012 - INFO - app.main - Application startup event triggered.
2025-06-25 23:27:17,050 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:27:17,050 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:27:17,063 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:27:17,073 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:27:17,073 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:27:17,073 - INFO - app.main - Redis publisher background task started
2025-06-25 23:27:17,073 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:27:17,073 - INFO - app.main - Generating initial service account token...
2025-06-25 23:27:17,073 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:27:18,119 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:27:18,123 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:27:18,123 - INFO - app.main - Application startup event finished.
2025-06-25 23:27:18,124 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:18,125 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:27:18,831 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:19,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:27:19,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:27:19,156 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:27:19,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:27:19,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:27:19,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:27:19,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:27:19,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:27:19,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:27:19,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:27:19,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:27:19,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:27:19,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:27:19,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:27:19,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:27:19,292 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:27:19,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:27:19,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:27:19,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:27:19,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:27:19,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:27:19,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:27:19,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:27:19,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:27:19,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:27:19,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:27:19,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:27:19,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:27:19,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:27:19,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:27:19,466 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:27:19,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:27:19,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:27:19,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:27:19,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:27:19,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:27:19,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:27:19,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:27:19,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:27:19,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:27:19,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:27:19,608 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:27:19,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:27:19,628 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:27:19,638 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:27:19,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:27:19,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:27:19,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:27:19,681 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:27:19,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:27:19,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:27:19,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:27:19,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:27:19,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:27:19,738 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:27:19,747 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:27:19,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:27:19,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:27:19,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:27:19,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:27:19,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:27:19,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:27:19,818 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:27:19,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:27:19,836 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:27:19,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:27:19,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:27:19,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:27:19,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:27:19,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:27:19,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:27:19,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:27:19,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:27:19,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:27:19,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:27:19,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:27:19,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:27:19,971 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:27:19,978 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:27:23,673 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:27:23,673 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:27:23,673 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:27:23,676 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:27:25,277 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:27:25,278 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:27:25,278 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:27:25,278 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:27:25,279 - INFO - app.main - Redis client connection closed.
2025-06-25 23:27:25,279 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:27:27,063 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:27:27,069 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:27:27,069 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:27:27,925 - INFO - app.main - Application startup event triggered.
2025-06-25 23:27:27,963 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:27:27,963 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:27:27,978 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:27:27,986 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:27:27,986 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:27:27,986 - INFO - app.main - Redis publisher background task started
2025-06-25 23:27:27,986 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:27:27,986 - INFO - app.main - Generating initial service account token...
2025-06-25 23:27:27,986 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:27:29,032 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:27:29,036 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:27:29,036 - INFO - app.main - Application startup event finished.
2025-06-25 23:27:29,037 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:29,037 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:27:29,699 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:30,042 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:27:30,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:27:30,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:27:30,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:27:30,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:27:30,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:27:30,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:27:30,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:27:30,128 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:27:30,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:27:30,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:27:30,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:27:30,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:27:30,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:27:30,190 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:27:30,204 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:27:30,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:27:30,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:27:30,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:27:30,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:27:30,257 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:27:30,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:27:30,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:27:30,290 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:27:30,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:27:30,308 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:27:30,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:27:30,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:27:30,338 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:27:30,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:27:30,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:27:30,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:27:30,378 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:27:30,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:27:30,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:27:30,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:27:30,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:27:30,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:27:30,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:27:30,475 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:27:30,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:27:30,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:27:30,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:27:30,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:27:30,526 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:27:30,535 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:27:30,545 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:27:30,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:27:30,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:27:30,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:27:30,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:27:30,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:27:30,613 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:27:30,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:27:30,638 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:27:30,647 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:27:30,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:27:30,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:27:30,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:27:30,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:27:30,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:27:30,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:27:30,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:27:30,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:27:30,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:27:30,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:27:30,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:27:30,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:27:30,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:27:30,792 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:27:30,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:27:30,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:27:30,825 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:27:30,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:27:30,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:27:30,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:27:30,857 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:27:30,866 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:27:30,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:27:32,596 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:27:32,596 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:27:32,596 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:27:32,599 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:27:34,520 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:27:34,520 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:27:34,521 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:27:34,521 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:27:34,522 - INFO - app.main - Redis client connection closed.
2025-06-25 23:27:34,522 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:27:36,537 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:27:36,544 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:27:36,544 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:27:37,167 - INFO - app.main - Application startup event triggered.
2025-06-25 23:27:37,207 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:27:37,207 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:27:37,221 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:27:37,227 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:27:37,228 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:27:37,228 - INFO - app.main - Redis publisher background task started
2025-06-25 23:27:37,228 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:27:37,228 - INFO - app.main - Generating initial service account token...
2025-06-25 23:27:37,228 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:27:38,183 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:27:38,186 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:27:38,186 - INFO - app.main - Application startup event finished.
2025-06-25 23:27:38,187 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:38,188 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:27:38,999 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:39,023 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:27:39,024 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:27:39,024 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:27:39,025 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:27:39,203 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:27:39,203 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:27:39,209 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:27:39,210 - INFO - app.main - Redis client connection closed.
2025-06-25 23:27:39,210 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:27:40,707 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 392f0ef8-c2c2-4bc2-8065-1d04d85cc5ae.
2025-06-25 23:27:44,438 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:27:44,449 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:27:44,450 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:27:45,551 - INFO - app.main - Application startup event triggered.
2025-06-25 23:27:45,595 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:27:45,596 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:27:45,629 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:27:45,641 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:27:45,641 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:27:45,641 - INFO - app.main - Redis publisher background task started
2025-06-25 23:27:45,642 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:27:45,642 - INFO - app.main - Generating initial service account token...
2025-06-25 23:27:45,642 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:27:46,724 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:27:46,733 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:27:46,733 - INFO - app.main - Application startup event finished.
2025-06-25 23:27:46,734 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:46,735 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:27:47,463 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:27:48,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:27:48,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:27:48,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:27:48,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:27:48,457 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:27:48,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:27:48,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:27:48,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:27:48,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:27:48,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:27:48,680 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:27:48,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:27:48,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:27:48,768 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:27:48,812 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:27:48,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:27:48,882 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:27:48,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:27:48,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:27:48,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:27:49,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:27:49,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:27:49,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:27:49,145 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:27:49,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:27:49,237 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:27:49,285 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:27:49,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:27:49,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:27:49,390 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:27:49,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:27:49,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:27:49,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:27:49,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:27:49,617 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:27:49,727 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:27:49,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:27:50,035 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:27:50,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:27:50,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:27:50,333 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:27:50,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:27:50,446 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:27:50,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:27:50,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:27:50,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:27:50,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:27:50,768 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:27:50,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:27:50,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:27:50,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:27:50,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:27:50,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:27:51,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:27:51,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:27:51,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:27:51,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:27:51,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:27:51,229 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:27:51,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:27:51,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:27:51,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:27:51,446 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:27:51,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:27:51,901 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:27:52,036 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:27:52,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:27:52,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:27:52,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:27:52,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:27:52,478 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:27:52,523 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:27:52,617 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:27:52,735 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:27:52,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:27:52,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:27:52,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:27:52,944 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:27:53,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:28:44,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:28:44,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:28:44,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:28:44,816 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:28:44,862 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:28:44,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:28:44,962 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:28:45,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:28:45,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:28:45,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:28:45,140 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:28:45,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:28:45,226 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:28:45,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:28:45,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:28:45,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:28:45,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:28:45,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:28:45,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:28:45,524 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:28:45,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:28:45,588 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:28:45,649 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:28:45,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:28:46,238 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:28:46,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:28:46,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:28:46,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:28:46,643 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:28:46,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:28:46,882 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:28:46,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:28:47,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:28:47,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:28:47,110 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:28:47,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:28:47,179 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:28:47,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:28:47,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:28:47,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:28:47,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:28:47,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:28:47,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:28:47,463 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:28:47,500 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:28:47,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:28:47,573 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:28:47,621 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:28:47,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:28:47,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:28:47,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:28:47,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:28:47,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:28:47,926 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:28:47,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:28:48,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:28:48,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:28:48,130 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:28:48,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:28:48,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:28:48,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:28:48,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:28:48,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:28:48,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:28:48,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:28:48,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:28:48,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:28:48,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:28:48,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:28:48,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:28:48,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:28:48,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:28:48,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:28:48,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:28:48,940 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:28:48,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:28:49,022 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:28:49,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:28:49,130 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:28:49,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:28:49,530 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9300000000000000000000000, PnL USD=-445.4414217089379495731388605, Commission=0.10000000, Final PnL=-445.5414217089379495731388605
2025-06-25 23:28:49,584 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:28:49,584 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:28:49,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:28:49,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:28:49,767 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:28:49,788 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:28:49,870 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:28:51,353 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364536924110809667222540259, Commission=0.10000000, Final PnL=-0.3364536924110809667222540259
2025-06-25 23:28:51,358 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.75000000000000000000000000, PnL USD=-0.9333698384647932896931079971, Commission=0.10000000, Final PnL=-1.033369838464793289693107997
2025-06-25 23:28:51,364 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.19000000000000000000000000, PnL USD=-0.2364536924110809667222540259, Commission=0.10000000, Final PnL=-0.3364536924110809667222540259
2025-06-25 23:28:51,371 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:29:45,646 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:29:45,740 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:29:45,937 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:29:48,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.4829435850207215840499807, Commission=0.10000000, Final PnL=-445.5829435850207215840499807
2025-06-25 23:29:48,368 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:29:48,368 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:29:48,453 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:29:48,485 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:29:48,579 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:29:50,594 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613533123420990404599818297, Commission=0.10000000, Final PnL=-0.3613533123420990404599818297
2025-06-25 23:29:50,601 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.72000000000000000000000000, PnL USD=-0.8960684994586252815770805590, Commission=0.10000000, Final PnL=-0.9960684994586252815770805590
2025-06-25 23:29:50,608 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613533123420990404599818297, Commission=0.10000000, Final PnL=-0.3613533123420990404599818297
2025-06-25 23:29:50,651 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:30:01,097 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 5555
2025-06-25 23:30:01,164 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 9, User ID: 4, Amount: 5555
2025-06-25 23:30:40,845 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:30:40,846 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:30:40,846 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:30:40,847 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:30:40,848 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:30:56,941 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:30:56,941 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:30:56,943 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:30:56,951 - INFO - app.main - Redis client connection closed.
2025-06-25 23:30:56,951 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:31:01,294 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:31:01,302 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:31:01,302 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:31:02,353 - INFO - app.main - Application startup event triggered.
2025-06-25 23:31:02,422 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:31:02,422 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:31:02,440 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:31:02,451 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:31:02,452 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:31:02,452 - INFO - app.main - Redis publisher background task started
2025-06-25 23:31:02,452 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:31:02,452 - INFO - app.main - Generating initial service account token...
2025-06-25 23:31:02,452 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:31:03,493 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:31:03,500 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:31:03,500 - INFO - app.main - Application startup event finished.
2025-06-25 23:31:03,501 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:31:03,501 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:31:04,209 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:31:04,548 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID ff1a8697-b25d-44da-b5cf-5fef49a1546a.
2025-06-25 23:31:04,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:31:04,562 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 9 to status 1.
2025-06-25 23:31:04,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:31:04,585 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:31:04,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:31:04,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:31:04,631 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:31:04,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:31:04,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:31:04,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:31:04,672 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:31:04,680 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:31:04,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:31:04,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:31:04,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:31:04,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:31:04,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:31:04,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:31:04,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:31:04,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:31:04,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:31:04,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:31:04,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:31:04,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:31:04,801 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:31:04,811 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:31:04,823 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:31:04,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:31:04,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:31:04,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:31:04,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:31:04,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:31:04,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:31:04,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:31:04,898 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:31:04,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:31:04,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:31:04,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:31:04,939 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:31:04,948 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:31:04,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:31:04,963 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:31:04,971 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:31:04,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:31:04,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:31:04,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:31:05,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:31:05,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:31:05,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:31:05,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:31:05,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:31:05,056 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:31:05,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:31:05,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:31:05,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:31:05,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:31:05,187 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:31:05,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:31:05,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:31:05,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:31:05,235 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:31:05,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:31:05,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:31:05,294 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:31:05,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:31:05,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:31:05,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:31:05,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:31:05,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:31:05,386 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:31:05,396 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:31:05,408 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:31:05,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:31:05,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:31:05,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:31:05,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:31:05,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:31:05,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:31:05,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:31:05,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:31:34,363 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:31:34,390 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:31:34,418 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:31:34,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:31:34,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:31:34,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:31:34,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:31:34,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:31:34,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:31:34,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:31:34,680 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:31:34,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:31:34,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:31:34,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:31:34,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:31:34,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:31:34,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:31:34,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:31:34,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:31:34,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:31:34,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:31:34,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:31:34,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:31:34,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:31:34,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:31:34,902 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:31:34,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:31:34,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:31:35,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:31:35,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:31:35,255 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:31:35,280 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:31:35,299 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:31:35,313 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:31:35,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:31:35,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:31:35,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:31:35,408 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:31:35,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:31:35,437 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:31:35,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:31:35,470 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:31:35,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:31:35,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:31:35,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:31:35,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:31:35,541 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:31:35,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:31:35,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:31:35,579 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:31:35,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:31:35,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:31:35,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:31:35,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:31:35,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:31:35,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:31:35,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:31:35,693 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:31:35,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:31:35,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:31:35,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:31:35,748 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:31:35,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:31:35,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:31:35,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:31:35,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:31:35,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:31:35,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:31:35,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:31:35,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:31:35,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:31:35,879 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:31:35,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:31:35,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:31:35,923 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:31:35,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:31:35,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:31:35,962 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:31:35,976 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:32:02,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:32:02,474 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:32:02,533 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:32:03,710 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5242000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9000000000000000000000000, PnL USD=-445.3320392698495651200119452, Commission=0.10000000, Final PnL=-445.4320392698495651200119452
2025-06-25 23:32:03,722 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:32:03,722 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:32:03,762 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:32:03,771 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:32:03,809 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:32:04,556 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.16000000000000000000000000, PnL USD=-0.1990866898104943571366356838, Commission=0.10000000, Final PnL=-0.2990866898104943571366356838
2025-06-25 23:32:04,588 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.78000000000000000000000000, PnL USD=-0.9705476128261599910410989585, Commission=0.10000000, Final PnL=-1.070547612826159991041098958
2025-06-25 23:32:04,621 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5242000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.16000000000000000000000000, PnL USD=-0.1990866898104943571366356838, Commission=0.10000000, Final PnL=-0.2990866898104943571366356838
2025-06-25 23:32:04,644 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:33:02,581 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:33:02,592 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:33:02,631 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:33:03,298 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9100000000000000000000000, PnL USD=-445.4109887374774438429469230, Commission=0.10000000, Final PnL=-445.5109887374774438429469230
2025-06-25 23:33:03,309 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:33:03,309 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:33:03,337 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:33:03,344 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:33:03,369 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:33:03,969 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.17000000000000000000000000, PnL USD=-0.2115611971874805550370232095, Commission=0.10000000, Final PnL=-0.3115611971874805550370232095
2025-06-25 23:33:03,989 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.75000000000000000000000000, PnL USD=-0.9333582228859436251633376890, Commission=0.10000000, Final PnL=-1.033358222885943625163337689
2025-06-25 23:33:03,993 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.17000000000000000000000000, PnL USD=-0.2115611971874805550370232095, Commission=0.10000000, Final PnL=-0.3115611971874805550370232095
2025-06-25 23:33:03,997 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:33:17,123 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:33:17,124 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:33:17,124 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:33:17,124 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:33:17,125 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:33:17,841 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:33:17,841 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:33:17,842 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:33:17,842 - INFO - app.main - Redis client connection closed.
2025-06-25 23:33:17,843 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:33:19,986 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:33:19,994 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:33:19,994 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:33:20,858 - INFO - app.main - Application startup event triggered.
2025-06-25 23:33:20,896 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:33:20,896 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:33:20,912 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:33:20,922 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:33:20,922 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:33:20,922 - INFO - app.main - Redis publisher background task started
2025-06-25 23:33:20,922 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:33:20,922 - INFO - app.main - Generating initial service account token...
2025-06-25 23:33:20,922 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:33:21,870 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:33:21,873 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:33:21,874 - INFO - app.main - Application startup event finished.
2025-06-25 23:33:21,874 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:21,875 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:33:22,582 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:23,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:33:23,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:33:23,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:33:23,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:33:23,118 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:33:23,132 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:33:23,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:33:23,165 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:33:23,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:33:23,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:33:23,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:33:23,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:33:23,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:33:23,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:33:23,272 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:33:23,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:33:23,295 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:33:23,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:33:23,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:33:23,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:33:23,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:33:23,350 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:33:23,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:33:23,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:33:23,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:33:23,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:33:23,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:33:23,409 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:33:23,420 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:33:23,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:33:23,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:33:23,458 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:33:23,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:33:23,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:33:23,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:33:23,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:33:23,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:33:23,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:33:23,553 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:33:23,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:33:23,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:33:23,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:33:23,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:33:23,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:33:23,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:33:23,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:33:23,633 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:33:23,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:33:23,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:33:23,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:33:23,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:33:23,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:33:23,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:33:23,708 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:33:23,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:33:23,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:33:23,738 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:33:23,747 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:33:23,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:33:23,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:33:23,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:33:23,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:33:23,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:33:23,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:33:23,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:33:23,836 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:33:23,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:33:23,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:33:23,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:33:23,886 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:33:23,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:33:23,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:33:23,920 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:33:23,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:33:23,938 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:33:23,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:33:23,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:33:23,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:33:23,978 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:33:29,132 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:33:29,132 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:33:29,132 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:33:29,133 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:33:29,135 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:33:29,296 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:33:29,296 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:33:29,296 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:33:29,297 - INFO - app.main - Redis client connection closed.
2025-06-25 23:33:29,297 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:33:33,135 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:33:33,158 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:33:33,159 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:33:34,032 - INFO - app.main - Application startup event triggered.
2025-06-25 23:33:34,070 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:33:34,070 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:33:34,099 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:33:34,111 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:33:34,112 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:33:34,112 - INFO - app.main - Redis publisher background task started
2025-06-25 23:33:34,112 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:33:34,112 - INFO - app.main - Generating initial service account token...
2025-06-25 23:33:34,112 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:33:35,140 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:33:35,141 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:33:35,142 - INFO - app.main - Application startup event finished.
2025-06-25 23:33:35,142 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:35,142 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:33:35,861 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:35,866 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:33:36,170 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:33:36,170 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:33:36,171 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:33:36,171 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:33:36,171 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:33:36,172 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:33:36,173 - INFO - app.main - Redis client connection closed.
2025-06-25 23:33:36,173 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:33:39,749 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:33:39,762 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:33:39,762 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:33:40,390 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 5477e8c2-c5f1-4f6f-944d-a3b89daa03f0.
2025-06-25 23:33:41,350 - INFO - app.main - Application startup event triggered.
2025-06-25 23:33:41,393 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:33:41,393 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:33:41,431 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:33:41,443 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:33:41,443 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:33:41,443 - INFO - app.main - Redis publisher background task started
2025-06-25 23:33:41,443 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:33:41,443 - INFO - app.main - Generating initial service account token...
2025-06-25 23:33:41,443 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:33:42,514 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:33:42,520 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:33:42,521 - INFO - app.main - Application startup event finished.
2025-06-25 23:33:42,522 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:42,522 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:33:43,136 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:43,588 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:33:43,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:33:43,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:33:43,643 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:33:43,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:33:43,713 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:33:43,738 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:33:43,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:33:43,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:33:43,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:33:43,801 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:33:43,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:33:43,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:33:43,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:33:43,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:33:43,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:33:43,893 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:33:43,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:33:43,931 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:33:43,948 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:33:43,963 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:33:43,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:33:43,997 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:33:44,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:33:44,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:33:44,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:33:44,050 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:33:44,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:33:44,077 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:33:44,092 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:33:44,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:33:44,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:33:44,185 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:33:44,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:33:44,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:33:44,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:33:44,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:33:44,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:33:44,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:33:44,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:33:44,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:33:44,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:33:44,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:33:44,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:33:44,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:33:44,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:33:44,470 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:33:44,488 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:33:44,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:33:44,524 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:33:44,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:33:44,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:33:44,580 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:33:44,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:33:44,613 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:33:44,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:33:44,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:33:44,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:33:44,685 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:33:44,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:33:44,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:33:44,731 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:33:44,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:33:44,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:33:44,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:33:44,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:33:44,812 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:33:44,829 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:33:44,844 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:33:44,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:33:44,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:33:44,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:33:44,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:33:44,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:33:44,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:33:44,952 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:33:44,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:33:44,987 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:33:45,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:33:50,273 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:33:50,273 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:33:50,273 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:33:50,274 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:33:52,245 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:33:52,245 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:33:52,245 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:33:52,246 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:33:52,246 - INFO - app.main - Redis client connection closed.
2025-06-25 23:33:52,246 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:33:57,298 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:33:57,308 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:33:57,308 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:33:58,030 - INFO - app.main - Application startup event triggered.
2025-06-25 23:33:58,082 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:33:58,082 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:33:58,092 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:33:58,102 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:33:58,102 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:33:58,103 - INFO - app.main - Redis publisher background task started
2025-06-25 23:33:58,103 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:33:58,103 - INFO - app.main - Generating initial service account token...
2025-06-25 23:33:58,103 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:33:59,114 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:33:59,117 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:33:59,118 - INFO - app.main - Application startup event finished.
2025-06-25 23:33:59,119 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:33:59,120 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:33:59,832 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:34:00,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:34:00,325 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:34:00,333 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:34:00,345 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:34:00,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:34:00,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:34:00,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:34:00,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:34:00,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:34:00,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:34:00,410 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:34:00,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:34:00,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:34:00,440 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:34:00,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:34:00,457 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:34:00,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:34:00,480 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:34:00,494 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:34:00,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:34:00,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:34:00,530 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:34:00,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:34:00,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:34:00,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:34:00,572 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:34:00,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:34:00,588 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:34:00,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:34:00,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:34:00,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:34:00,638 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:34:00,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:34:00,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:34:00,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:34:00,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:34:00,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:34:00,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:34:00,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:34:00,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:34:00,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:34:00,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:34:00,781 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:34:00,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:34:00,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:34:00,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:34:00,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:34:00,861 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:34:00,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:34:00,886 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:34:00,896 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:34:00,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:34:00,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:34:00,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:34:00,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:34:00,959 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:34:00,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:34:00,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:34:00,999 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:34:01,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:34:01,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:34:01,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:34:01,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:34:01,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:34:01,067 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:34:01,078 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:34:01,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:34:01,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:34:01,117 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:34:01,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:34:01,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:34:01,145 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:34:01,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:34:01,166 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:34:01,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:34:01,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:34:01,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:34:01,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:34:01,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:34:58,100 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:34:58,234 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:34:58,367 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:34:59,622 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.9500000000000000000000000, PnL USD=-445.4995768407427689550455518, Commission=0.10000000, Final PnL=-445.5995768407427689550455518
2025-06-25 23:34:59,665 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:34:59,665 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:34:59,735 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:34:59,749 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:34:59,782 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:35:00,645 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613598177948698801478549826, Commission=0.10000000, Final PnL=-0.3613598177948698801478549826
2025-06-25 23:35:00,650 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5246000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.72000000000000000000000000, PnL USD=-0.8960908038681253033640742262, Commission=0.10000000, Final PnL=-0.9960908038681253033640742262
2025-06-25 23:35:00,655 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5241500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.21000000000000000000000000, PnL USD=-0.2613598177948698801478549826, Commission=0.10000000, Final PnL=-0.3613598177948698801478549826
2025-06-25 23:35:00,692 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:35:24,948 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 3333
2025-06-25 23:35:24,988 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 11, User ID: 4, Amount: 3333
2025-06-25 23:35:42,131 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID d6e32fb9-f6a9-4215-b3cd-2b8567f71f36.
2025-06-25 23:35:42,150 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 11 to status 1.
2025-06-25 23:35:58,102 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:35:58,110 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:35:58,155 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:35:58,711 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5243500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-357.7500000000000000000000000, PnL USD=-445.2728268445683560689037140, Commission=0.10000000, Final PnL=-445.3728268445683560689037140
2025-06-25 23:35:58,720 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:35:58,720 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:35:58,746 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:35:58,768 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:35:58,805 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:35:59,426 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.01244880429234772000149385652, Commission=0.10000000, Final PnL=-0.1124488042923477200014938565
2025-06-25 23:35:59,428 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5244000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.52000000000000000000000000, PnL USD=-0.6473378232020814400776805388, Commission=0.10000000, Final PnL=-0.7473378232020814400776805388
2025-06-25 23:35:59,434 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5243500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.01244880429234772000149385652, Commission=0.10000000, Final PnL=-0.1124488042923477200014938565
2025-06-25 23:35:59,446 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:36:22,396 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:36:22,396 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:36:22,396 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:36:22,397 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:36:24,609 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:36:24,610 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:36:24,610 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:36:24,610 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:36:24,611 - INFO - app.main - Redis client connection closed.
2025-06-25 23:36:24,611 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:36:26,955 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:36:26,960 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:36:26,960 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:36:27,670 - INFO - app.main - Application startup event triggered.
2025-06-25 23:36:27,704 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:36:27,704 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:36:27,717 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:36:27,723 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:36:27,723 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:36:27,723 - INFO - app.main - Redis publisher background task started
2025-06-25 23:36:27,723 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:36:27,723 - INFO - app.main - Generating initial service account token...
2025-06-25 23:36:27,723 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:36:28,705 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:36:28,712 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:36:28,712 - INFO - app.main - Application startup event finished.
2025-06-25 23:36:28,712 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:36:28,713 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:36:29,434 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:36:30,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:36:30,066 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:36:30,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:36:30,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:36:30,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:36:30,117 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:36:30,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:36:30,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:36:30,152 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:36:30,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:36:30,173 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:36:30,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:36:30,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:36:30,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:36:30,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:36:30,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:36:30,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:36:30,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:36:30,249 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:36:30,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:36:30,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:36:30,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:36:30,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:36:30,299 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:36:30,308 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:36:30,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:36:30,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:36:30,338 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:36:30,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:36:30,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:36:30,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:36:30,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:36:30,387 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:36:30,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:36:30,409 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:36:30,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:36:30,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:36:30,444 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:36:30,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:36:30,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:36:30,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:36:30,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:36:30,495 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:36:30,505 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:36:30,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:36:30,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:36:30,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:36:30,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:36:30,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:36:30,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:36:30,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:36:30,640 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:36:30,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:36:30,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:36:30,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:36:30,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:36:30,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:36:30,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:36:30,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:36:30,712 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:36:30,731 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:36:30,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:36:30,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:36:30,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:36:30,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:36:30,795 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:36:30,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:36:30,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:36:30,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:36:30,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:36:30,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:36:30,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:36:30,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:36:30,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:36:30,880 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:36:30,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:36:30,901 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:36:30,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:36:30,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:37:06,491 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:37:06,491 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:37:06,492 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:37:06,493 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:37:06,494 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:37:07,127 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:37:07,127 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:37:07,127 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:37:07,130 - INFO - app.main - Redis client connection closed.
2025-06-25 23:37:07,130 - INFO - app.main - Application shutdown event finished.
2025-06-25 23:38:49,728 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-25 23:39:28,451 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-25 23:39:28,453 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:39:28,675 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 7672253b-143c-4762-99b8-3c75a446f4d1.
2025-06-25 23:39:28,819 - INFO - app.core.config - .env file loaded successfully.
2025-06-25 23:39:28,855 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-25 23:39:28,855 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-25 23:39:30,110 - INFO - app.main - Application startup event triggered.
2025-06-25 23:39:30,153 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-25 23:39:30,154 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-25 23:39:30,170 - INFO - app.main - Redis connection pool initialized successfully
2025-06-25 23:39:30,179 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-25 23:39:30,179 - INFO - app.main - Firebase events processor background task started
2025-06-25 23:39:30,179 - INFO - app.main - Redis publisher background task started
2025-06-25 23:39:30,179 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-25 23:39:30,180 - INFO - app.main - Generating initial service account token...
2025-06-25 23:39:30,180 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-25 23:39:31,235 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-25 23:39:31,238 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-25 23:39:31,238 - INFO - app.main - Application startup event finished.
2025-06-25 23:39:31,239 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:39:31,241 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-25 23:39:31,885 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-25 23:39:37,444 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:39:37,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:39:37,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:39:37,521 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:39:37,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:39:37,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:39:37,577 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:39:37,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:39:37,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:39:37,639 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:39:37,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:39:37,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:39:37,735 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:39:37,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:39:37,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:39:37,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:39:38,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:39:38,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:39:38,151 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:39:38,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:39:38,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:39:38,233 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:39:38,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:39:38,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:39:38,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:39:38,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:39:38,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:39:38,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:39:38,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:39:38,438 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:39:38,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:39:38,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:39:38,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:39:38,561 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:39:38,583 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:39:38,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:39:38,633 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:39:38,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:39:38,696 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:39:38,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:39:38,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:39:38,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:39:38,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:39:38,806 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:39:38,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:39:38,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:39:38,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:39:38,889 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:39:38,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:39:38,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:39:38,939 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:39:38,952 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:39:38,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:39:38,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:39:38,990 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:39:39,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:39:39,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:39:39,031 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:39:39,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:39:39,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:39:39,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:39:39,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:39:39,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:39:39,112 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:39:39,128 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:39:39,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:39:39,166 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:39:39,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:39:39,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:39:39,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:39:39,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:39:39,274 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:39:39,292 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:39:39,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:39:39,337 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:39:39,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:39:39,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:39:39,406 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:39:39,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:39:56,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:39:56,451 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:39:56,608 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:39:56,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:39:56,974 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:39:57,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:39:57,429 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:39:57,555 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:39:57,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:39:57,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:39:58,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:39:58,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:39:59,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:39:59,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:40:00,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:40:00,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:40:01,274 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:40:01,554 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:40:01,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:40:02,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:40:02,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:40:02,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:40:02,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:40:03,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:40:03,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:40:03,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:40:03,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:40:03,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:40:03,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:40:03,953 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:40:04,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:40:04,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:40:04,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:40:04,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:40:04,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:40:04,365 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:40:04,427 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:40:04,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:40:04,572 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:40:04,639 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:40:04,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:40:04,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:40:05,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:40:05,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:40:05,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:40:05,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:40:05,567 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:40:05,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:40:05,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:40:05,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:40:05,931 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:40:06,043 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:40:06,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:40:06,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:40:06,404 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:40:06,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:40:06,560 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:40:06,593 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:40:06,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:40:06,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:40:06,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:40:06,877 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:40:06,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:40:06,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:40:07,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:40:07,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:40:07,145 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:40:07,190 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:40:07,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:40:07,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:40:07,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:40:07,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:40:07,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:40:07,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:40:07,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:40:07,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:40:07,643 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:40:07,703 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:40:07,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:40:11,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-25 23:40:11,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-25 23:40:12,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-25 23:40:12,050 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-25 23:40:12,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-25 23:40:12,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-25 23:40:12,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-25 23:40:12,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-25 23:40:12,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-25 23:40:12,284 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-25 23:40:12,306 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-25 23:40:12,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-25 23:40:12,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-25 23:40:12,378 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-25 23:40:12,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-25 23:40:12,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-25 23:40:12,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-25 23:40:12,488 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-25 23:40:12,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-25 23:40:12,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-25 23:40:12,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-25 23:40:12,593 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-25 23:40:12,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-25 23:40:12,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-25 23:40:12,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-25 23:40:12,696 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-25 23:40:12,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-25 23:40:12,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-25 23:40:12,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-25 23:40:12,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-25 23:40:12,814 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-25 23:40:12,835 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-25 23:40:12,860 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-25 23:40:12,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-25 23:40:12,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-25 23:40:12,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-25 23:40:12,957 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-25 23:40:12,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-25 23:40:13,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-25 23:40:13,043 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-25 23:40:13,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-25 23:40:13,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-25 23:40:13,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-25 23:40:13,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-25 23:40:13,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-25 23:40:13,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-25 23:40:13,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-25 23:40:13,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-25 23:40:13,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-25 23:40:13,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-25 23:40:13,353 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-25 23:40:13,385 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-25 23:40:13,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-25 23:40:13,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-25 23:40:13,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-25 23:40:13,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-25 23:40:13,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-25 23:40:13,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-25 23:40:13,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-25 23:40:13,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-25 23:40:13,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-25 23:40:13,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-25 23:40:13,752 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-25 23:40:13,792 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-25 23:40:13,835 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-25 23:40:13,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-25 23:40:13,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-25 23:40:13,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-25 23:40:14,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-25 23:40:14,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-25 23:40:14,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-25 23:40:14,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-25 23:40:14,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-25 23:40:14,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-25 23:40:14,176 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-25 23:40:14,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-25 23:40:14,263 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-25 23:40:14,295 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-25 23:40:14,345 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-25 23:40:30,179 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:40:30,210 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:40:32,633 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:40:33,485 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5240200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.0800000000000000000000000, PnL USD=-445.9000062262623746964697092, Commission=0.10000000, Final PnL=-446.0000062262623746964697092
2025-06-25 23:40:33,520 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:40:33,521 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:40:33,614 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:40:33,666 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:40:33,751 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:40:35,386 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4233858414793599402278812029, Commission=0.10000000, Final PnL=-0.5233858414793599402278812029
2025-06-25 23:40:35,388 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5244900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7596040097129693045264927464, Commission=0.10000000, Final PnL=-0.8596040097129693045264927464
2025-06-25 23:40:35,398 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5240200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.34000000000000000000000000, PnL USD=-0.4233858414793599402278812029, Commission=0.10000000, Final PnL=-0.5233858414793599402278812029
2025-06-25 23:40:35,415 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:40:54,659 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 999
2025-06-25 23:40:54,702 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 13, User ID: 4, Amount: 999
2025-06-25 23:41:23,544 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID ee6cb279-d826-4af7-9c3f-6f282e96e849.
2025-06-25 23:41:23,621 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 13 to status 1.
2025-06-25 23:41:30,181 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:41:30,195 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:41:30,234 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:41:31,090 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5238700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.2300000000000000000000000, PnL USD=-446.0756845604990847622249617, Commission=0.10000000, Final PnL=-446.1756845604990847622249617
2025-06-25 23:41:31,137 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:41:31,137 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:41:31,196 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:41:31,207 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:41:31,250 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:41:32,420 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.49000000000000000000000000, PnL USD=-0.6101585166921937066507278319, Commission=0.10000000, Final PnL=-0.7101585166921937066507278319
2025-06-25 23:41:32,423 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5243300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.45000000000000000000000000, PnL USD=-0.5603496581867085061078112742, Commission=0.10000000, Final PnL=-0.6603496581867085061078112742
2025-06-25 23:41:32,425 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.49000000000000000000000000, PnL USD=-0.6101585166921937066507278319, Commission=0.10000000, Final PnL=-0.7101585166921937066507278319
2025-06-25 23:41:32,432 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:42:30,179 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:42:30,205 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:42:30,299 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:42:31,701 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5238500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.2500000000000000000000000, PnL USD=-446.1228098576640972317348044, Commission=0.10000000, Final PnL=-446.2228098576640972317348044
2025-06-25 23:42:31,715 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:42:31,715 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:42:31,760 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:42:31,781 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:42:31,834 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:42:32,834 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.51000000000000000000000000, PnL USD=-0.6350945792809733135748353113, Commission=0.10000000, Final PnL=-0.7350945792809733135748353113
2025-06-25 23:42:32,838 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.41000000000000000000000000, PnL USD=-0.5105662304023510952268283875, Commission=0.10000000, Final PnL=-0.6105662304023510952268283875
2025-06-25 23:42:32,849 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.51000000000000000000000000, PnL USD=-0.6350945792809733135748353113, Commission=0.10000000, Final PnL=-0.7350945792809733135748353113
2025-06-25 23:42:32,875 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:42:36,867 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '8896076684', 'order_user_id': '4', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_status': 'PROCESSING', 'order_price': '94.29800000', 'order_quantity': '0.01000000', 'contract_value': '1000.00000000', 'margin': '6.52956369', 'stop_loss': '', 'take_profit': '', 'close_price': '', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_id': '', 'modify_id': '', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'OPEN', 'timestamp': '2025-06-26T06:42:36.867181', 'account_type': 'live', 'action': ''}
2025-06-25 23:42:37,167 - INFO - app.core.firebase - Order data (ID: 8896076684) sent to Firebase successfully.
2025-06-25 23:43:30,180 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:43:30,490 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:43:30,522 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:43:31,105 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5238400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.2600000000000000000000000, PnL USD=-446.1352626925519594535696051, Commission=0.10000000, Final PnL=-446.2352626925519594535696051
2025-06-25 23:43:31,116 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:43:31,117 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:43:31,154 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:43:31,161 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:43:31,186 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:43:31,718 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.52000000000000000000000000, PnL USD=-0.6475474141688355354096360036, Commission=0.10000000, Final PnL=-0.7475474141688355354096360036
2025-06-25 23:43:31,721 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5243000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.42000000000000000000000000, PnL USD=-0.5230190652902133170616290799, Commission=0.10000000, Final PnL=-0.6230190652902133170616290799
2025-06-25 23:43:31,724 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.52000000000000000000000000, PnL USD=-0.6475474141688355354096360036, Commission=0.10000000, Final PnL=-0.7475474141688355354096360036
2025-06-25 23:43:31,730 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:44:30,180 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-25 23:44:30,223 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-25 23:44:30,265 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-25 23:44:31,003 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5238300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.2700000000000000000000000, PnL USD=-446.1477155274398216754044058, Commission=0.10000000, Final PnL=-446.2477155274398216754044058
2025-06-25 23:44:31,052 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-25 23:44:31,052 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-25 23:44:31,094 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-25 23:44:31,105 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-25 23:44:31,134 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-25 23:44:31,625 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.53000000000000000000000000, PnL USD=-0.6600002490566977572444366960, Commission=0.10000000, Final PnL=-0.7600002490566977572444366960
2025-06-25 23:44:31,628 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5242900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.41000000000000000000000000, PnL USD=-0.5105662304023510952268283875, Commission=0.10000000, Final PnL=-0.6105662304023510952268283875
2025-06-25 23:44:31,631 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5238300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.53000000000000000000000000, PnL USD=-0.6600002490566977572444366960, Commission=0.10000000, Final PnL=-0.7600002490566977572444366960
2025-06-25 23:44:31,664 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-25 23:44:42,577 - INFO - app.main - Application shutdown event triggered.
2025-06-25 23:44:42,578 - INFO - app.main - APScheduler shut down gracefully.
2025-06-25 23:44:42,578 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-25 23:44:42,582 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-25 23:44:42,585 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-25 23:44:42,801 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-25 23:44:42,801 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-25 23:44:42,802 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-25 23:44:42,805 - INFO - app.main - Redis client connection closed.
2025-06-25 23:44:42,805 - INFO - app.main - Application shutdown event finished.
2025-06-26 00:17:56,690 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 00:17:56,698 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 00:17:56,698 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 00:17:59,586 - INFO - app.main - Application startup event triggered.
2025-06-26 00:17:59,637 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 00:17:59,637 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 00:17:59,761 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 00:17:59,811 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 00:17:59,811 - INFO - app.main - Firebase events processor background task started
2025-06-26 00:17:59,811 - INFO - app.main - Redis publisher background task started
2025-06-26 00:17:59,812 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 00:17:59,812 - INFO - app.main - Generating initial service account token...
2025-06-26 00:17:59,812 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 00:18:01,040 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 00:18:01,062 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 00:18:01,066 - INFO - app.main - Application startup event finished.
2025-06-26 00:18:01,068 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 00:18:01,070 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 00:18:01,966 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 00:18:02,239 - WARNING - app.api.v1.endpoints.users - JWTError during refresh token validation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 289, in refresh_access_token
    payload = decode_token(refresh_token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials
2025-06-26 00:18:15,902 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 00:18:15,989 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 00:18:16,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 00:18:16,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 00:18:16,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 00:18:16,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 00:18:16,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 00:18:16,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 00:18:16,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 00:18:16,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 00:18:16,573 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 00:18:16,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 00:18:16,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 00:18:16,679 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 00:18:16,706 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 00:18:16,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 00:18:16,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 00:18:16,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 00:18:16,856 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 00:18:16,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 00:18:16,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 00:18:16,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 00:18:16,931 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 00:18:16,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 00:18:16,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 00:18:16,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 00:18:17,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 00:18:17,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 00:18:17,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 00:18:17,126 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 00:18:17,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 00:18:17,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 00:18:17,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 00:18:17,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 00:18:17,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 00:18:17,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 00:18:17,267 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 00:18:17,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 00:18:17,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 00:18:17,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 00:18:17,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 00:18:17,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 00:18:17,362 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 00:18:17,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 00:18:17,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 00:18:17,422 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 00:18:17,442 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 00:18:17,462 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 00:18:17,479 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 00:18:17,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 00:18:17,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 00:18:17,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 00:18:17,554 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 00:18:17,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 00:18:17,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 00:18:17,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 00:18:17,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 00:18:17,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 00:18:17,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 00:18:17,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 00:18:17,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 00:18:17,732 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 00:18:17,753 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 00:18:17,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 00:18:17,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 00:18:17,811 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 00:18:17,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 00:18:17,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 00:18:17,866 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 00:18:17,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 00:18:17,909 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 00:18:17,947 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 00:18:17,966 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 00:18:17,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 00:18:18,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 00:18:18,030 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 00:18:18,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 00:18:18,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 00:18:18,085 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 00:18:59,791 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:18:59,834 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:18:59,863 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:19:00,437 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6100000000000000000000000, PnL USD=-447.4849948214976478368834151, Commission=0.10000000, Final PnL=-447.5849948214976478368834151
2025-06-26 00:19:00,447 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:19:00,447 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:19:00,479 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:19:00,489 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:19:00,528 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:19:01,450 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.87000000000000000000000000, PnL USD=-1.085613746116123235877662561, Commission=0.10000000, Final PnL=-1.185613746116123235877662561
2025-06-26 00:19:01,452 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.06000000000000000000000000, PnL USD=-0.07486991352524987833639052147, Commission=0.10000000, Final PnL=-0.1748699135252498783363905215
2025-06-26 00:19:01,454 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.87000000000000000000000000, PnL USD=-1.085613746116123235877662561, Commission=0.10000000, Final PnL=-1.185613746116123235877662561
2025-06-26 00:19:01,456 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:19:36,989 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 100
2025-06-26 00:19:37,041 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 14, User ID: 4, Amount: 100
2025-06-26 00:19:59,788 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:19:59,834 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:19:59,937 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:20:01,251 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6500000000000000000000000, PnL USD=-447.6075181588997329206499763, Commission=0.10000000, Final PnL=-447.7075181588997329206499763
2025-06-26 00:20:01,261 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:20:01,261 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:20:01,336 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:20:01,365 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:20:01,447 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:20:03,041 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.91000000000000000000000000, PnL USD=-1.135725429017160686427457098, Commission=0.10000000, Final PnL=-1.235725429017160686427457098
2025-06-26 00:20:03,043 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.03000000000000000000000000, PnL USD=-0.03744149765990639625585023401, Commission=0.10000000, Final PnL=-0.1374414976599063962558502340
2025-06-26 00:20:03,045 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.91000000000000000000000000, PnL USD=-1.135725429017160686427457098, Commission=0.10000000, Final PnL=-1.235725429017160686427457098
2025-06-26 00:20:03,047 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:20:36,619 - ERROR - app.api.v1.endpoints.money_requests - Admin (ID: 10) encountered an error updating status for money request ID 13: 409: Money request ID 13 has already been processed (current status: 1) or is not in a pending state. Cannot update to 1.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\money_requests.py", line 79, in admin_update_money_request_status
     raise HTTPException(
    ...<2 lines>...
    )
fastapi.exceptions.HTTPException: 409: Money request ID 13 has already been processed (current status: 1) or is not in a pending state. Cannot update to 1.
2025-06-26 00:20:59,790 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:20:59,877 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:21:00,000 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:21:01,973 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6700000000000000000000000, PnL USD=-447.6548263897556226754199845, Commission=0.10000000, Final PnL=-447.7548263897556226754199845
2025-06-26 00:21:01,984 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:21:01,985 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:21:02,057 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:21:02,073 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:21:02,164 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:21:03,672 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.89000000000000000000000000, PnL USD=-1.110806020818252165447692269, Commission=0.10000000, Final PnL=-1.210806020818252165447692269
2025-06-26 00:21:03,674 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.05000000000000000000000000, PnL USD=-0.06240483263023888569930855445, Commission=0.10000000, Final PnL=-0.1624048326302388856993085544
2025-06-26 00:21:03,678 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.89000000000000000000000000, PnL USD=-1.110806020818252165447692269, Commission=0.10000000, Final PnL=-1.210806020818252165447692269
2025-06-26 00:21:03,681 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:21:11,208 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 40b485eb-c154-4b26-b1cc-cb403eb355a0.
2025-06-26 00:21:11,276 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 14 to status 1.
2025-06-26 00:21:59,794 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:21:59,896 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:22:00,234 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:22:02,499 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6700000000000000000000000, PnL USD=-447.6324788458178369068716771, Commission=0.10000000, Final PnL=-447.7324788458178369068716771
2025-06-26 00:22:02,554 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:22:02,554 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:22:02,740 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:22:02,788 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:22:02,975 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:22:05,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.93000000000000000000000000, PnL USD=-1.160671941691835359309088186, Commission=0.10000000, Final PnL=-1.260671941691835359309088186
2025-06-26 00:22:05,780 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.02000000000000000000000000, PnL USD=-0.02496068691810398622170082121, Commission=0.10000000, Final PnL=-0.1249606869181039862217008212
2025-06-26 00:22:05,799 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.93000000000000000000000000, PnL USD=-1.160671941691835359309088186, Commission=0.10000000, Final PnL=-1.260671941691835359309088186
2025-06-26 00:22:05,810 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:22:59,794 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:22:59,863 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:23:00,235 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:23:03,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6500000000000000000000000, PnL USD=-447.6075181588997329206499763, Commission=0.10000000, Final PnL=-447.7075181588997329206499763
2025-06-26 00:23:03,916 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:23:03,918 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:23:04,023 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:23:04,073 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:23:04,203 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:23:06,700 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.87000000000000000000000000, PnL USD=-1.085708580841611341286876654, Commission=0.10000000, Final PnL=-1.185708580841611341286876654
2025-06-26 00:23:06,715 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.07000000000000000000000000, PnL USD=-0.08735586282633654470124294913, Commission=0.10000000, Final PnL=-0.1873558628263365447012429491
2025-06-26 00:23:06,732 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.87000000000000000000000000, PnL USD=-1.085708580841611341286876654, Commission=0.10000000, Final PnL=-1.185708580841611341286876654
2025-06-26 00:23:06,749 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:23:59,799 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:23:59,998 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:24:00,402 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:24:04,050 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5235000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6000000000000000000000000, PnL USD=-447.6233273417215897743159577, Commission=0.10000000, Final PnL=-447.7233273417215897743159577
2025-06-26 00:24:04,116 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:24:04,116 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:24:04,273 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:24:04,313 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:24:04,545 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:24:07,423 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5235000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.86000000000000000000000000, PnL USD=-1.073537305421363392377885132, Commission=0.10000000, Final PnL=-1.173537305421363392377885132
2025-06-26 00:24:07,428 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.06000000000000000000000000, PnL USD=-0.07489795154102535295659663708, Commission=0.10000000, Final PnL=-0.1748979515410253529565966371
2025-06-26 00:24:07,432 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5235000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.86000000000000000000000000, PnL USD=-1.073537305421363392377885132, Commission=0.10000000, Final PnL=-1.173537305421363392377885132
2025-06-26 00:24:07,442 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:24:59,787 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:24:59,832 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:24:59,970 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:25:02,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6200000000000000000000000, PnL USD=-447.6035946080878681977034448, Commission=0.10000000, Final PnL=-447.7035946080878681977034448
2025-06-26 00:25:02,114 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:25:02,115 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:25:02,257 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:25:02,318 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:25:02,433 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:25:04,453 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.88000000000000000000000000, PnL USD=-1.098311346305055976436229297, Commission=0.10000000, Final PnL=-1.198311346305055976436229297
2025-06-26 00:25:04,456 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5239300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.05000000000000000000000000, PnL USD=-0.06240405376733272593387666463, Commission=0.10000000, Final PnL=-0.1624040537673327259338766646
2025-06-26 00:25:04,460 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.88000000000000000000000000, PnL USD=-1.098311346305055976436229297, Commission=0.10000000, Final PnL=-1.198311346305055976436229297
2025-06-26 00:25:04,466 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:25:59,853 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:25:59,902 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:26:00,328 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:26:02,624 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6800000000000000000000000, PnL USD=-447.6337859424920127795527157, Commission=0.10000000, Final PnL=-447.7337859424920127795527157
2025-06-26 00:26:02,658 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:26:02,659 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:26:02,770 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:26:02,789 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:26:02,892 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:26:04,421 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.93000000000000000000000000, PnL USD=-1.160628486565413271100350685, Commission=0.10000000, Final PnL=-1.260628486565413271100350685
2025-06-26 00:26:04,427 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.01247987619962809968925108263, Commission=0.10000000, Final PnL=-0.1124798761996280996892510826
2025-06-26 00:26:04,433 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.93000000000000000000000000, PnL USD=-1.160628486565413271100350685, Commission=0.10000000, Final PnL=-1.260628486565413271100350685
2025-06-26 00:26:04,477 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:26:59,791 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:26:59,843 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:26:59,983 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:27:02,137 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5234600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.6400000000000000000000000, PnL USD=-447.5838658146964856230031949, Commission=0.10000000, Final PnL=-447.6838658146964856230031949
2025-06-26 00:27:02,173 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:27:02,173 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:27:02,292 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:27:02,334 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:27:02,443 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:27:04,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.90000000000000000000000000, PnL USD=-1.123216893182073458384814108, Commission=0.10000000, Final PnL=-1.223216893182073458384814108
2025-06-26 00:27:04,135 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.01248018770202303842649793453, Commission=0.10000000, Final PnL=-0.1124801877020230384264979345
2025-06-26 00:27:04,158 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5234600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.90000000000000000000000000, PnL USD=-1.123216893182073458384814108, Commission=0.10000000, Final PnL=-1.223216893182073458384814108
2025-06-26 00:27:04,198 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:27:59,796 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:27:59,850 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:27:59,979 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:28:01,301 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.2107824784724822163983527, Commission=0.10000000, Final PnL=-447.3107824784724822163983527
2025-06-26 00:28:01,326 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:28:01,326 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:28:01,536 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:28:01,589 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:28:01,651 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:28:02,834 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7611869525069255534203498964, Commission=0.10000000, Final PnL=-0.8611869525069255534203498964
2025-06-26 00:28:02,837 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08734932241882752252364670943, Commission=0.10000000, Final PnL=-0.01265067758117247747635329057
2025-06-26 00:28:02,840 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7611869525069255534203498964, Commission=0.10000000, Final PnL=-0.8611869525069255534203498964
2025-06-26 00:28:02,875 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:28:59,793 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:28:59,839 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:28:59,951 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:29:01,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.2052014825722878785987945, Commission=0.10000000, Final PnL=-447.3052014825722878785987945
2025-06-26 00:29:01,131 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:29:01,131 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:29:01,223 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:29:01,252 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:29:01,306 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:29:02,336 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7612534474797519062535098776, Commission=0.10000000, Final PnL=-0.8612534474797519062535098776
2025-06-26 00:29:02,345 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08735695298947972694712408431, Commission=0.10000000, Final PnL=-0.01264304701052027305287591569
2025-06-26 00:29:02,351 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7612534474797519062535098776, Commission=0.10000000, Final PnL=-0.8612534474797519062535098776
2025-06-26 00:29:02,388 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:29:59,795 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:29:59,837 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:29:59,939 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:30:01,107 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.1884593306212094741308309, Commission=0.10000000, Final PnL=-447.2884593306212094741308309
2025-06-26 00:30:01,172 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:30:01,172 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:30:01,339 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:30:01,359 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:30:01,422 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:30:02,490 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7612249482117453265779818804, Commission=0.10000000, Final PnL=-0.8612249482117453265779818804
2025-06-26 00:30:02,496 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08735368258167569321386677315, Commission=0.10000000, Final PnL=-0.01264631741832430678613322685
2025-06-26 00:30:02,500 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7612249482117453265779818804, Commission=0.10000000, Final PnL=-0.8612249482117453265779818804
2025-06-26 00:30:02,513 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:30:59,788 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:30:59,857 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:30:59,948 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:31:01,240 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.0991890205864004990642545, Commission=0.10000000, Final PnL=-447.1991890205864004990642545
2025-06-26 00:31:01,259 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:31:01,259 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:31:01,336 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:31:01,358 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:31:01,419 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:31:02,951 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610255130684299170357432475, Commission=0.10000000, Final PnL=-0.8610255130684299170357432475
2025-06-26 00:31:02,955 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08733079658162310523360988086, Commission=0.10000000, Final PnL=-0.01266920341837689476639011914
2025-06-26 00:31:02,959 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610255130684299170357432475, Commission=0.10000000, Final PnL=-0.8610255130684299170357432475
2025-06-26 00:31:02,967 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:31:59,794 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:31:59,844 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:31:59,916 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:32:01,089 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.1159244887519183500318165, Commission=0.10000000, Final PnL=-447.2159244887519183500318165
2025-06-26 00:32:01,167 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:32:01,168 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:32:01,239 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:32:01,265 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:32:01,339 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:32:02,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7611014760377805781875803212, Commission=0.10000000, Final PnL=-0.8611014760377805781875803212
2025-06-26 00:32:02,651 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08733951364367973848054200407, Commission=0.10000000, Final PnL=-0.01266048635632026151945799593
2025-06-26 00:32:02,654 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7611014760377805781875803212, Commission=0.10000000, Final PnL=-0.8611014760377805781875803212
2025-06-26 00:32:02,690 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:32:59,799 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:32:59,862 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:32:59,951 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:33:01,120 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.0936108095968858779054535, Commission=0.10000000, Final PnL=-447.1936108095968858779054535
2025-06-26 00:33:01,171 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:33:01,172 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:33:01,247 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:33:01,270 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:33:01,329 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:33:02,350 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610634926576087634589711919, Commission=0.10000000, Final PnL=-0.8610634926576087634589711919
2025-06-26 00:33:02,354 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08733515489513543187234095644, Commission=0.10000000, Final PnL=-0.01266484510486456812765904356
2025-06-26 00:33:02,356 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610634926576087634589711919, Commission=0.10000000, Final PnL=-0.8610634926576087634589711919
2025-06-26 00:33:02,394 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:33:59,795 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 00:33:59,850 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 00:33:59,949 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 00:34:01,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-447.0211067312010378723616586, Commission=0.10000000, Final PnL=-447.1211067312010378723616586
2025-06-26 00:34:01,171 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 00:34:01,171 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 00:34:01,250 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 00:34:01,275 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 00:34:01,348 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 00:34:02,591 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610919798373009931626490992, Commission=0.10000000, Final PnL=-0.8610919798373009931626490992
2025-06-26 00:34:02,595 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08733842391575585167440235564, Commission=0.10000000, Final PnL=-0.01266157608424414832559764436
2025-06-26 00:34:02,599 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7610919798373009931626490992, Commission=0.10000000, Final PnL=-0.8610919798373009931626490992
2025-06-26 00:34:02,604 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 00:38:53,122 - INFO - app.main - Application shutdown event triggered.
2025-06-26 00:38:53,123 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 00:38:53,123 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 00:38:53,127 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 01:34:03,593 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 01:34:03,593 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 01:34:03,593 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 01:34:03,594 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 01:34:03,608 - INFO - app.main - Redis client connection closed.
2025-06-26 01:34:03,608 - INFO - app.main - Application shutdown event finished.
2025-06-26 01:48:49,249 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 01:48:49,255 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 01:48:49,255 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 01:48:49,901 - INFO - app.main - Application startup event triggered.
2025-06-26 01:48:49,943 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 01:48:49,943 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 01:48:49,978 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 01:48:49,985 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 01:48:49,985 - INFO - app.main - Firebase events processor background task started
2025-06-26 01:48:49,985 - INFO - app.main - Redis publisher background task started
2025-06-26 01:48:49,985 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 01:48:49,985 - INFO - app.main - Generating initial service account token...
2025-06-26 01:48:49,985 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 01:48:51,043 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 01:48:51,046 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 01:48:51,046 - INFO - app.main - Application startup event finished.
2025-06-26 01:48:51,047 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 01:48:51,047 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 01:48:51,854 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 01:49:49,995 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 01:49:50,035 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 01:49:50,121 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 01:49:50,836 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-448.4307738512363599959955952, Commission=0.10000000, Final PnL=-448.5307738512363599959955952
2025-06-26 01:49:50,872 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 01:49:50,873 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 01:49:50,928 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 01:49:50,941 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 01:49:50,993 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 01:49:51,768 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7633396736410051056161777956, Commission=0.10000000, Final PnL=-0.8633396736410051056161777956
2025-06-26 01:49:51,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08759635599159074982480728802, Commission=0.10000000, Final PnL=-0.01240364400840925017519271198
2025-06-26 01:49:51,773 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7633396736410051056161777956, Commission=0.10000000, Final PnL=-0.8633396736410051056161777956
2025-06-26 01:49:51,777 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 01:50:37,904 - WARNING - app.api.v1.endpoints.users - JWTError during refresh token validation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 289, in refresh_access_token
    payload = decode_token(refresh_token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials
2025-06-26 01:50:49,997 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 01:50:50,008 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 01:50:50,075 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 01:50:50,860 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.3500000000000000000000000, PnL USD=-448.4644457237253773183490601, Commission=0.10000000, Final PnL=-448.5644457237253773183490601
2025-06-26 01:50:50,876 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 01:50:50,876 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 01:50:50,940 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 01:50:50,957 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 01:50:50,990 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 01:50:51,980 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7633969914649713413260581183, Commission=0.10000000, Final PnL=-0.8633969914649713413260581183
2025-06-26 01:50:51,983 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5238100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.07000000000000000000000000, PnL USD=0.08760293344679998998823617751, Commission=0.10000000, Final PnL=-0.01239706655320001001176382249
2025-06-26 01:50:51,987 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5237500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.61000000000000000000000000, PnL USD=-0.7633969914649713413260581183, Commission=0.10000000, Final PnL=-0.8633969914649713413260581183
2025-06-26 01:50:51,990 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 01:50:56,950 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 01:50:57,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 01:50:57,179 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 01:50:57,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 01:50:57,352 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 01:50:57,424 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 01:50:57,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 01:50:57,633 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 01:50:57,706 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 01:50:57,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 01:50:57,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 01:50:57,959 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 01:50:58,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 01:50:58,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 01:50:58,248 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 01:50:58,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 01:50:58,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 01:50:58,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 01:50:58,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 01:50:58,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 01:50:58,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 01:50:58,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 01:50:58,470 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 01:50:58,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 01:50:58,567 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 01:50:58,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 01:50:58,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 01:50:58,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 01:50:58,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 01:50:58,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 01:50:59,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 01:50:59,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 01:50:59,169 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 01:50:59,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 01:50:59,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 01:50:59,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 01:50:59,318 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 01:50:59,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 01:50:59,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 01:50:59,440 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 01:50:59,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 01:50:59,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 01:50:59,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 01:50:59,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 01:50:59,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 01:50:59,630 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 01:50:59,681 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 01:50:59,732 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 01:50:59,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 01:50:59,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 01:50:59,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 01:50:59,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 01:50:59,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 01:50:59,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 01:50:59,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 01:50:59,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 01:51:00,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 01:51:00,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 01:51:00,112 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 01:51:00,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 01:51:00,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 01:51:00,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 01:51:00,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 01:51:00,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 01:51:00,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 01:51:00,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 01:51:00,393 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 01:51:00,430 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 01:51:00,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 01:51:00,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 01:51:00,511 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 01:51:00,550 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 01:51:00,584 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 01:51:00,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 01:51:00,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 01:51:00,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 01:51:00,733 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 01:51:00,753 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 01:51:00,783 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 01:51:49,986 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 01:51:50,120 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 01:51:50,196 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 01:51:51,272 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.9700000000000000000000000, PnL USD=-449.1953850389168355982681382, Commission=0.10000000, Final PnL=-449.2953850389168355982681382
2025-06-26 01:51:51,315 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 01:51:51,316 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 01:51:51,379 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 01:51:51,408 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 01:51:51,465 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 01:51:53,111 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.23000000000000000000000000, PnL USD=-1.539058296525231797194659593, Commission=0.10000000, Final PnL=-1.639058296525231797194659593
2025-06-26 01:51:53,113 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5235800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.30000000000000000000000000, PnL USD=0.3753800723232272676084535592, Commission=0.10000000, Final PnL=0.2753800723232272676084535592
2025-06-26 01:51:53,115 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.23000000000000000000000000, PnL USD=-1.539058296525231797194659593, Commission=0.10000000, Final PnL=-1.639058296525231797194659593
2025-06-26 01:51:53,117 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 01:52:10,686 - INFO - app.main - Application shutdown event triggered.
2025-06-26 01:52:10,686 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 01:52:10,687 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 01:52:10,690 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 01:52:10,894 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 01:52:10,894 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 01:52:10,894 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 01:52:10,895 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 01:52:10,897 - INFO - app.main - Redis client connection closed.
2025-06-26 01:52:10,898 - INFO - app.main - Application shutdown event finished.
2025-06-26 01:59:18,030 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 01:59:18,039 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 01:59:18,039 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 01:59:18,770 - INFO - app.main - Application startup event triggered.
2025-06-26 01:59:18,810 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 01:59:18,810 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 01:59:18,824 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 01:59:18,831 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 01:59:18,832 - INFO - app.main - Firebase events processor background task started
2025-06-26 01:59:18,832 - INFO - app.main - Redis publisher background task started
2025-06-26 01:59:18,832 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 01:59:18,832 - INFO - app.main - Generating initial service account token...
2025-06-26 01:59:18,832 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 01:59:19,870 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 01:59:19,873 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 01:59:19,873 - INFO - app.main - Application startup event finished.
2025-06-26 01:59:19,873 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 01:59:19,873 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 01:59:20,593 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 01:59:24,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 01:59:24,748 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 01:59:24,755 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 01:59:24,762 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 01:59:24,768 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 01:59:24,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 01:59:24,781 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 01:59:24,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 01:59:24,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 01:59:24,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 01:59:24,829 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 01:59:24,844 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 01:59:24,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 01:59:24,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 01:59:24,879 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 01:59:24,892 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 01:59:24,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 01:59:24,912 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 01:59:24,922 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 01:59:24,931 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 01:59:24,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 01:59:24,952 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 01:59:24,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 01:59:24,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 01:59:24,980 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 01:59:24,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 01:59:25,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 01:59:25,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 01:59:25,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 01:59:25,031 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 01:59:25,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 01:59:25,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 01:59:25,056 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 01:59:25,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 01:59:25,072 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 01:59:25,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 01:59:25,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 01:59:25,104 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 01:59:25,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 01:59:25,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 01:59:25,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 01:59:25,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 01:59:25,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 01:59:25,199 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 01:59:25,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 01:59:25,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 01:59:25,235 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 01:59:25,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 01:59:25,272 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 01:59:25,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 01:59:25,308 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 01:59:25,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 01:59:25,350 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 01:59:25,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 01:59:25,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 01:59:25,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 01:59:25,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 01:59:25,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 01:59:25,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 01:59:25,494 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 01:59:25,511 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 01:59:25,541 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 01:59:25,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 01:59:25,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 01:59:25,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 01:59:25,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 01:59:25,675 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 01:59:25,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 01:59:25,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 01:59:25,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 01:59:25,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 01:59:25,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 01:59:25,787 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 01:59:25,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 01:59:25,837 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 01:59:25,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 01:59:25,857 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 01:59:25,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 01:59:25,882 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 01:59:31,137 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-26 01:59:47,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 01:59:47,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 01:59:47,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 01:59:47,521 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 01:59:47,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 01:59:47,630 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 01:59:47,686 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 01:59:47,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 01:59:47,787 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 01:59:47,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 01:59:47,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 01:59:48,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 01:59:48,104 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 01:59:48,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 01:59:48,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 01:59:48,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 01:59:48,437 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 01:59:48,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 01:59:48,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 01:59:48,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 01:59:48,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 01:59:48,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 01:59:48,679 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 01:59:48,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 01:59:48,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 01:59:48,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 01:59:48,760 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 01:59:48,784 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 01:59:48,807 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 01:59:48,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 01:59:48,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 01:59:48,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 01:59:48,912 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 01:59:48,938 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 01:59:48,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 01:59:48,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 01:59:49,029 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 01:59:49,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 01:59:49,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 01:59:49,099 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 01:59:49,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 01:59:49,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 01:59:49,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 01:59:49,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 01:59:49,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 01:59:49,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 01:59:49,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 01:59:49,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 01:59:49,412 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 01:59:49,443 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 01:59:49,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 01:59:49,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 01:59:49,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 01:59:49,541 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 01:59:49,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 01:59:49,608 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 01:59:49,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 01:59:49,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 01:59:49,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 01:59:49,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 01:59:49,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 01:59:49,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 01:59:49,895 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 01:59:49,925 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 01:59:49,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 01:59:49,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 01:59:50,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 01:59:50,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 01:59:50,078 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 01:59:50,107 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 01:59:50,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 01:59:50,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 01:59:50,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 01:59:50,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 01:59:50,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 01:59:50,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 01:59:50,381 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 01:59:50,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 01:59:50,422 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:00:18,843 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:00:18,951 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:00:19,115 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:00:20,520 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5230100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.0900000000000000000000000, PnL USD=-449.1319791875125075045027016, Commission=0.10000000, Final PnL=-449.2319791875125075045027016
2025-06-26 02:00:20,531 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:00:20,531 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:00:20,623 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:00:20,640 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:00:20,696 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:00:21,663 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.36000000000000000000000000, PnL USD=-1.701020612367420452271362818, Commission=0.10000000, Final PnL=-1.801020612367420452271362818
2025-06-26 02:00:21,672 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5234600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.42000000000000000000000000, PnL USD=0.5253151891134680808485091055, Commission=0.10000000, Final PnL=0.4253151891134680808485091055
2025-06-26 02:00:21,700 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.36000000000000000000000000, PnL USD=-1.701020612367420452271362818, Commission=0.10000000, Final PnL=-1.801020612367420452271362818
2025-06-26 02:00:21,724 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:01:12,808 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 100
2025-06-26 02:01:12,848 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 15, User ID: 4, Amount: 100
2025-06-26 02:01:18,831 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:01:18,853 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:01:18,907 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:01:19,745 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5230000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.1000000000000000000000000, PnL USD=-449.1332516196813167571353528, Commission=0.10000000, Final PnL=-449.2332516196813167571353528
2025-06-26 02:01:19,782 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:01:19,783 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:01:19,838 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:01:19,857 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:01:19,948 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:01:21,166 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.36000000000000000000000000, PnL USD=-1.700978062385871876328889111, Commission=0.10000000, Final PnL=-1.800978062385871876328889111
2025-06-26 02:01:21,170 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5234800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.40000000000000000000000000, PnL USD=0.5002876654076093753908497386, Commission=0.10000000, Final PnL=0.4002876654076093753908497386
2025-06-26 02:01:21,493 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.36000000000000000000000000, PnL USD=-1.700978062385871876328889111, Commission=0.10000000, Final PnL=-1.800978062385871876328889111
2025-06-26 02:01:21,497 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:02:18,831 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:02:18,851 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:02:18,890 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:02:19,589 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5230700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.0300000000000000000000000, PnL USD=-448.9895452953829223150417688, Commission=0.10000000, Final PnL=-449.0895452953829223150417688
2025-06-26 02:02:19,602 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:02:19,602 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:02:19,659 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:02:19,671 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:02:19,707 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:02:20,511 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.29000000000000000000000000, PnL USD=-1.613225951678255214846681006, Commission=0.10000000, Final PnL=-1.713225951678255214846681006
2025-06-26 02:02:20,515 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5235400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.34000000000000000000000000, PnL USD=0.4251913361012455605022260017, Commission=0.10000000, Final PnL=0.3251913361012455605022260017
2025-06-26 02:02:20,523 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.29000000000000000000000000, PnL USD=-1.613225951678255214846681006, Commission=0.10000000, Final PnL=-1.713225951678255214846681006
2025-06-26 02:02:20,543 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:02:25,140 - ERROR - app.crud.wallet - Database error creating wallet record for user 4: Instance '<Wallet at 0x259b8d21bf0>' is not persistent within this Session
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\crud\wallet.py", line 77, in create_wallet_record
    raise e
  File "C:\Users\Dhanush\FASTAPI\app\crud\wallet.py", line 69, in create_wallet_record
    await db.refresh(wallet_record)  # Still inside open transaction
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 331, in refresh
    await greenlet_spawn(
    ...<4 lines>...
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3147, in refresh
    self._expire_state(state, attribute_names)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3273, in _expire_state
    self._validate_persistent(state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4131, in _validate_persistent
    raise sa_exc.InvalidRequestError(
    ...<2 lines>...
    )
sqlalchemy.exc.InvalidRequestError: Instance '<Wallet at 0x259b8d21bf0>' is not persistent within this Session
2025-06-26 02:02:29,577 - INFO - app.main - Application shutdown event triggered.
2025-06-26 02:02:29,578 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 02:02:29,578 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 02:02:29,579 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 02:02:29,580 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 02:02:30,173 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 02:02:30,173 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 02:02:30,173 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 02:02:30,174 - INFO - app.main - Redis client connection closed.
2025-06-26 02:02:30,174 - INFO - app.main - Application shutdown event finished.
2025-06-26 02:05:49,022 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 02:05:49,030 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 02:05:49,030 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 02:05:49,861 - INFO - app.main - Application startup event triggered.
2025-06-26 02:05:49,895 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 02:05:49,895 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 02:05:49,916 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 02:05:49,921 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 02:05:49,921 - INFO - app.main - Firebase events processor background task started
2025-06-26 02:05:49,921 - INFO - app.main - Redis publisher background task started
2025-06-26 02:05:49,921 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 02:05:49,921 - INFO - app.main - Generating initial service account token...
2025-06-26 02:05:49,921 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 02:05:50,814 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 02:05:50,818 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 02:05:50,819 - INFO - app.main - Application startup event finished.
2025-06-26 02:05:50,819 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:05:50,820 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 02:05:51,435 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:05:51,708 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:05:51,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:05:51,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:05:51,741 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:05:51,754 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:05:51,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:05:51,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:05:51,784 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:05:51,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:05:51,807 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:05:51,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:05:51,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:05:51,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:05:51,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:05:51,864 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:05:51,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:05:51,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:05:51,895 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:05:51,906 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:05:51,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:05:51,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:05:51,941 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:05:51,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:05:51,963 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:05:51,976 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:05:51,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:05:51,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:05:52,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:05:52,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:05:52,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:05:52,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:05:52,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:05:52,057 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:05:52,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:05:52,077 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:05:52,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:05:52,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:05:52,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:05:52,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:05:52,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:05:52,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:05:52,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:05:52,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:05:52,169 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:05:52,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:05:52,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:05:52,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:05:52,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:05:52,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:05:52,255 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:05:52,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:05:52,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:05:52,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:05:52,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:05:52,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:05:52,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:05:52,350 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:05:52,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:05:52,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:05:52,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:05:52,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:05:52,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:05:52,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:05:52,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:05:52,429 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:05:52,440 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:05:52,449 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:05:52,462 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:05:52,472 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:05:52,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:05:52,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:05:52,500 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:05:52,511 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:05:52,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:05:52,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:05:52,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:05:52,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:05:52,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:05:52,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:06:05,175 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 2888511034.
2025-06-26 02:06:05,211 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 15 to status 1.
2025-06-26 02:06:49,559 - INFO - app.main - Application shutdown event triggered.
2025-06-26 02:06:49,560 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 02:06:49,560 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 02:06:49,561 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 02:06:49,562 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 02:06:51,042 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 02:06:51,042 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 02:06:51,042 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 02:06:51,044 - INFO - app.main - Redis client connection closed.
2025-06-26 02:06:51,045 - INFO - app.main - Application shutdown event finished.
2025-06-26 02:10:07,030 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 02:10:07,036 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 02:10:07,036 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 02:10:07,628 - INFO - app.main - Application startup event triggered.
2025-06-26 02:10:07,661 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 02:10:07,662 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 02:10:07,699 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 02:10:07,705 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 02:10:07,705 - INFO - app.main - Firebase events processor background task started
2025-06-26 02:10:07,705 - INFO - app.main - Redis publisher background task started
2025-06-26 02:10:07,705 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 02:10:07,705 - INFO - app.main - Generating initial service account token...
2025-06-26 02:10:07,705 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 02:10:08,521 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 02:10:08,526 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 02:10:08,526 - INFO - app.main - Application startup event finished.
2025-06-26 02:10:08,526 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:10:08,527 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 02:10:09,129 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:10:14,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:10:14,631 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:10:14,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:10:14,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:10:14,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:10:14,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:10:14,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:10:14,685 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:10:14,694 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:10:14,703 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:10:14,725 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:10:14,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:10:14,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:10:14,754 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:10:14,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:10:14,773 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:10:14,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:10:14,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:10:14,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:10:14,807 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:10:14,816 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:10:14,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:10:14,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:10:14,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:10:14,850 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:10:14,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:10:14,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:10:14,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:10:14,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:10:14,892 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:10:14,901 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:10:14,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:10:14,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:10:14,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:10:14,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:10:14,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:10:14,955 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:10:14,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:10:14,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:10:14,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:10:14,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:10:15,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:10:15,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:10:15,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:10:15,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:10:15,032 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:10:15,040 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:10:15,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:10:15,057 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:10:15,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:10:15,072 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:10:15,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:10:15,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:10:15,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:10:15,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:10:15,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:10:15,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:10:15,130 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:10:15,140 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:10:15,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:10:15,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:10:15,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:10:15,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:10:15,185 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:10:15,193 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:10:15,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:10:15,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:10:15,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:10:15,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:10:15,237 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:10:15,245 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:10:15,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:10:15,262 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:10:15,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:10:15,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:10:15,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:10:15,294 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:10:15,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:10:15,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:10:32,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:10:32,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:10:32,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:10:32,371 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:10:32,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:10:32,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:10:32,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:10:32,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:10:32,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:10:32,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:10:32,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:10:32,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:10:33,028 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:10:33,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:10:33,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:10:33,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:10:33,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:10:33,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:10:33,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:10:33,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:10:33,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:10:33,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:10:33,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:10:33,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:10:33,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:10:33,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:10:33,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:10:33,526 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:10:33,545 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:10:33,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:10:33,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:10:33,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:10:33,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:10:33,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:10:33,730 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:10:33,753 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:10:33,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:10:33,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:10:33,850 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:10:33,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:10:33,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:10:33,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:10:33,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:10:34,026 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:10:34,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:10:34,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:10:34,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:10:34,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:10:34,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:10:34,167 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:10:34,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:10:34,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:10:34,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:10:34,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:10:34,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:10:34,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:10:34,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:10:34,343 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:10:34,361 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:10:34,381 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:10:34,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:10:34,422 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:10:34,437 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:10:34,462 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:10:34,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:10:34,522 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:10:34,542 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:10:34,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:10:34,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:10:34,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:10:34,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:10:34,630 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:10:34,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:10:34,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:10:34,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:10:34,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:10:34,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:10:34,727 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:10:34,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:11:07,704 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:11:07,744 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:11:07,804 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:11:08,332 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5230200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.0800000000000000000000000, PnL USD=-448.9117253622373076297990974, Commission=0.10000000, Final PnL=-449.0117253622373076297990974
2025-06-26 02:11:08,349 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:11:08,349 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:11:08,423 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:11:08,432 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:11:08,510 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:11:09,700 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.33000000000000000000000000, PnL USD=-1.662728625185963069922114291, Commission=0.10000000, Final PnL=-1.762728625185963069922114291
2025-06-26 02:11:09,703 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5235000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.38000000000000000000000000, PnL USD=0.4750653214817037342634612259, Commission=0.10000000, Final PnL=0.3750653214817037342634612259
2025-06-26 02:11:09,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5230300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.33000000000000000000000000, PnL USD=-1.662728625185963069922114291, Commission=0.10000000, Final PnL=-1.762728625185963069922114291
2025-06-26 02:11:09,708 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:11:12,048 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 333
2025-06-26 02:11:12,085 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 16, User ID: 4, Amount: 333
2025-06-26 02:11:33,450 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 4972180345.
2025-06-26 02:11:33,498 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 16 to status 1.
2025-06-26 02:11:50,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:11:50,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:11:50,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:11:50,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:11:50,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:11:50,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:11:50,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:11:50,688 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:11:50,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:11:50,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:11:50,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:11:50,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:11:50,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:11:50,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:11:50,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:11:50,897 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:11:50,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:11:50,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:11:50,978 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:11:51,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:11:51,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:11:51,053 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:11:51,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:11:51,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:11:51,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:11:51,174 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:11:51,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:11:51,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:11:51,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:11:51,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:11:51,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:11:51,327 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:11:51,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:11:51,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:11:51,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:11:51,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:11:51,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:11:51,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:11:51,487 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:11:51,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:11:51,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:11:51,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:11:51,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:11:51,620 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:11:51,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:11:51,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:11:51,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:11:51,688 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:11:51,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:11:51,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:11:51,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:11:51,786 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:11:51,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:11:51,816 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:11:51,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:11:51,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:11:51,857 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:11:51,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:11:51,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:11:51,906 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:11:51,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:11:51,936 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:11:51,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:11:51,962 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:11:51,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:11:51,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:11:51,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:11:52,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:11:52,032 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:11:52,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:11:52,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:11:52,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:11:52,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:11:52,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:11:52,159 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:11:52,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:11:52,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:11:52,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:11:52,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:12:07,704 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:12:07,715 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:12:07,784 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:12:08,478 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5230400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.0600000000000000000000000, PnL USD=-448.8474423721186059302965148, Commission=0.10000000, Final PnL=-448.9474423721186059302965148
2025-06-26 02:12:08,491 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:12:08,492 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:12:08,543 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:12:08,552 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:12:08,590 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:12:09,417 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.26000000000000000000000000, PnL USD=-1.575078753937696884844242212, Commission=0.10000000, Final PnL=-1.675078753937696884844242212
2025-06-26 02:12:09,434 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5235500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.33000000000000000000000000, PnL USD=0.4125206260313015650782539127, Commission=0.10000000, Final PnL=0.3125206260313015650782539127
2025-06-26 02:12:09,439 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.26000000000000000000000000, PnL USD=-1.575078753937696884844242212, Commission=0.10000000, Final PnL=-1.675078753937696884844242212
2025-06-26 02:12:09,450 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:12:38,990 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 123
2025-06-26 02:12:39,022 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 17, User ID: 4, Amount: 123
2025-06-26 02:13:07,707 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:13:07,725 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:13:07,771 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:13:08,481 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-358.9700000000000000000000000, PnL USD=-448.7517657795057067493405673, Commission=0.10000000, Final PnL=-448.8517657795057067493405673
2025-06-26 02:13:08,497 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:13:08,497 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:13:08,524 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:13:08,536 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:13:08,561 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:13:09,943 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.23000000000000000000000000, PnL USD=-1.537692211526440805100637580, Commission=0.10000000, Final PnL=-1.637692211526440805100637580
2025-06-26 02:13:09,950 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5235900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.29000000000000000000000000, PnL USD=0.3625453181647705963245405676, Commission=0.10000000, Final PnL=0.2625453181647705963245405676
2025-06-26 02:13:09,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5231300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.23000000000000000000000000, PnL USD=-1.537692211526440805100637580, Commission=0.10000000, Final PnL=-1.637692211526440805100637580
2025-06-26 02:13:09,969 - ERROR - app.api.v1.endpoints.money_requests - Admin (ID: 10) encountered an error updating status for money request ID 1: 404: Money request with ID 1 not found.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\money_requests.py", line 72, in admin_update_money_request_status
    raise HTTPException(
    ...<2 lines>...
    )
fastapi.exceptions.HTTPException: 404: Money request with ID 1 not found.
2025-06-26 02:13:09,984 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:13:21,546 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 3483187666.
2025-06-26 02:13:21,575 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 17 to status 1.
2025-06-26 02:13:53,283 - INFO - app.main - Application shutdown event triggered.
2025-06-26 02:13:53,283 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 02:13:53,283 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 02:13:53,286 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 02:13:55,310 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 02:13:55,311 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 02:13:55,311 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 02:13:55,311 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 02:13:55,311 - INFO - app.main - Redis client connection closed.
2025-06-26 02:13:55,311 - INFO - app.main - Application shutdown event finished.
2025-06-26 02:17:36,948 - INFO - app.core.config - .env file loaded successfully.
2025-06-26 02:17:36,954 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-26 02:17:36,954 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-26 02:17:37,576 - INFO - app.main - Application startup event triggered.
2025-06-26 02:17:37,610 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-26 02:17:37,610 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-26 02:17:37,631 - INFO - app.main - Redis connection pool initialized successfully
2025-06-26 02:17:37,638 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-26 02:17:37,638 - INFO - app.main - Firebase events processor background task started
2025-06-26 02:17:37,638 - INFO - app.main - Redis publisher background task started
2025-06-26 02:17:37,638 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-26 02:17:37,638 - INFO - app.main - Generating initial service account token...
2025-06-26 02:17:37,638 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-26 02:17:39,015 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-26 02:17:39,020 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-26 02:17:39,020 - INFO - app.main - Application startup event finished.
2025-06-26 02:17:39,021 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:17:39,021 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-26 02:17:39,731 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-26 02:17:42,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:17:42,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:17:42,231 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:17:42,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:17:42,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:17:42,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:17:42,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:17:42,294 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:17:42,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:17:42,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:17:42,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:17:42,385 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:17:42,408 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:17:42,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:17:42,458 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:17:42,485 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:17:42,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:17:42,528 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:17:42,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:17:42,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:17:42,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:17:42,583 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:17:42,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:17:42,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:17:42,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:17:42,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:17:42,653 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:17:42,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:17:42,679 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:17:42,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:17:42,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:17:42,711 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:17:42,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:17:42,731 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:17:42,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:17:42,752 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:17:42,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:17:42,778 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:17:42,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:17:42,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:17:42,811 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:17:42,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:17:42,834 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:17:42,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:17:42,855 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:17:42,864 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:17:42,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:17:42,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:17:42,895 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:17:42,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:17:42,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:17:42,960 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:17:42,978 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:17:42,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:17:43,019 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:17:43,036 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:17:43,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:17:43,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:17:43,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:17:43,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:17:43,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:17:43,099 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:17:43,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:17:43,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:17:43,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:17:43,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:17:43,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:17:43,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:17:43,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:17:43,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:17:43,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:17:43,199 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:17:43,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:17:43,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:17:43,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:17:43,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:17:43,269 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:17:43,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:17:43,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:18:23,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-26 02:18:23,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-26 02:18:23,190 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-26 02:18:23,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-26 02:18:23,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-26 02:18:23,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-26 02:18:23,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-26 02:18:23,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-26 02:18:23,235 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-26 02:18:23,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-26 02:18:23,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-26 02:18:23,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-26 02:18:23,259 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-26 02:18:23,265 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-26 02:18:23,272 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-26 02:18:23,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-26 02:18:23,285 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-26 02:18:23,291 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-26 02:18:23,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-26 02:18:23,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-26 02:18:23,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-26 02:18:23,317 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-26 02:18:23,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-26 02:18:23,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-26 02:18:23,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-26 02:18:23,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-26 02:18:23,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-26 02:18:23,362 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-26 02:18:23,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-26 02:18:23,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-26 02:18:23,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-26 02:18:23,390 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-26 02:18:23,396 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-26 02:18:23,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-26 02:18:23,410 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-26 02:18:23,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-26 02:18:23,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-26 02:18:23,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-26 02:18:23,456 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-26 02:18:23,463 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-26 02:18:23,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-26 02:18:23,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-26 02:18:23,479 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-26 02:18:23,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-26 02:18:23,492 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-26 02:18:23,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-26 02:18:23,505 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-26 02:18:23,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-26 02:18:23,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-26 02:18:23,521 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-26 02:18:23,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-26 02:18:23,533 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-26 02:18:23,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-26 02:18:23,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-26 02:18:23,551 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-26 02:18:23,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-26 02:18:23,563 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-26 02:18:23,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-26 02:18:23,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-26 02:18:23,580 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-26 02:18:23,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-26 02:18:23,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-26 02:18:23,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-26 02:18:23,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-26 02:18:23,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-26 02:18:23,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-26 02:18:23,633 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-26 02:18:23,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-26 02:18:23,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-26 02:18:23,656 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-26 02:18:23,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-26 02:18:23,672 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-26 02:18:23,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-26 02:18:23,693 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-26 02:18:23,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-26 02:18:23,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-26 02:18:23,745 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-26 02:18:23,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-26 02:18:23,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-26 02:18:37,644 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:18:37,665 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:18:37,691 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:18:40,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5229900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.1100000000000000000000000, PnL USD=-448.9043339125217195644836681, Commission=0.10000000, Final PnL=-449.0043339125217195644836681
2025-06-26 02:18:40,781 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:18:40,781 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:18:40,798 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:18:40,801 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:18:40,817 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:18:41,684 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5229900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.37000000000000000000000000, PnL USD=-1.712564221158293436003850144, Commission=0.10000000, Final PnL=-1.812564221158293436003850144
2025-06-26 02:18:41,688 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5234600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.42000000000000000000000000, PnL USD=0.5250196882383089365851219421, Commission=0.10000000, Final PnL=0.4250196882383089365851219421
2025-06-26 02:18:41,691 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5229900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.37000000000000000000000000, PnL USD=-1.712564221158293436003850144, Commission=0.10000000, Final PnL=-1.812564221158293436003850144
2025-06-26 02:18:41,695 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:19:26,080 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 4, Amount: 155
2025-06-26 02:19:26,102 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 18, User ID: 4, Amount: 155
2025-06-26 02:19:37,642 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-26 02:19:37,652 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-26 02:19:37,682 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-26 02:19:38,169 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5229500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.1500000000000000000000000, PnL USD=-448.6907201039428314427065114, Commission=0.10000000, Final PnL=-448.7907201039428314427065114
2025-06-26 02:19:38,176 - WARNING - app.core.cache - User 10 (type: live) not found in DB. Cannot cache.
2025-06-26 02:19:38,176 - WARNING - app.main - No user data found for user 10 (live). Skipping portfolio update.
2025-06-26 02:19:38,200 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-26 02:19:38,207 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-26 02:19:38,230 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-26 02:19:38,713 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5229500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.41000000000000000000000000, PnL USD=-1.761531157863175253610514217, Commission=0.10000000, Final PnL=-1.861531157863175253610514217
2025-06-26 02:19:38,718 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=SELL, Entry=0.52388000, Current=0.5234100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.47000000000000000000000000, PnL USD=0.5871770526210584178701714057, Commission=0.10000000, Final PnL=0.4871770526210584178701714057
2025-06-26 02:19:38,722 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.52436000, Current=0.5229500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-1.41000000000000000000000000, PnL USD=-1.761531157863175253610514217, Commission=0.10000000, Final PnL=-1.861531157863175253610514217
2025-06-26 02:19:38,727 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-26 02:19:38,749 - INFO - app.crud.wallet - Wallet record created successfully for user 4 with transaction ID 4965841093.
2025-06-26 02:19:38,770 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 18 to status 1.
2025-06-26 02:21:23,017 - INFO - app.main - Application shutdown event triggered.
2025-06-26 02:21:23,017 - INFO - app.main - APScheduler shut down gracefully.
2025-06-26 02:21:23,017 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-26 02:21:23,018 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-26 02:21:24,439 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-26 02:21:24,439 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-26 02:21:24,439 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-26 02:21:24,439 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-26 02:21:24,440 - INFO - app.main - Redis client connection closed.
2025-06-26 02:21:24,440 - INFO - app.main - Application shutdown event finished.
